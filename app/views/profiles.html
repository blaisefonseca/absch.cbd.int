<link href="/app/css/country.css" rel="stylesheet">
<link href="/app/css/profiles.css" rel="stylesheet">
<link href="/app/css/find.css" rel="stylesheet">
<link href="/app/css/record.css" rel="stylesheet">
<link href="/app/libs/flag-icon-css/css/flag-icon.min.css" rel="stylesheet">
<link href="/app/libs/angucomplete/angucomplete.css" rel="stylesheet">
<link href="/app/libs/jqvmap/jqvmap/jqvmap.css" rel="stylesheet">

<div ng-controller="ProfileController">
  <style>
    .dl-horizontal dd {
      text-align: left;
    }
    .list-group-item-default {
      color: #fff;
      background-color: #999;
    }
    .list-group-item-primary {
      color: #fff;
      background-color: #428bca;
    }
    .list-group-item-info {
      color: #fff;
      background-color: #5bc0de;
    }
    .list-group-item-success {
      color: #fff;
      background-color: #5cb85c;
    }
    .list-flag {
      background-position: 0%;
    }
    .jqvmap-label {
      background: none;
      color: none;
    }
    .jqvmap-zoomin,
    .jqvmap-zoomout {
      /*padding:0px;*/
      width: 25px;
      height: 25px
    }
    .view li {
      cursor: pointer
    }
    .active-circle {
      border: 2px solid #ccc;
    }
    .animate-enter,
    .animate-leave {
      -webkit-transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      -moz-transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      -ms-transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      -o-transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      position: relative;
      display: block;
    }
    .animate-enter.animate-enter-active,
    .animate-leave {
      opacity: 1;
      top: 0;
      height: 30px;
    }
    .animate-leave.animate-leave-active,
    .animate-enter {
      opacity: 0;
      top: -50px;
      height: 0px;
    }
    .active-facet {
      background-color: #428bca!important;
    }
    .facetCircle {
      width: 80px;
      height: 80px;
      padding-top: 20px;
      padding-left: 20px;
      background-color: #1FA65D;
    }
    .myWell-on {
      /*background-color:#428bca!important;*/
      color: #428bca!important;
    }
    .europeanUnion {
      top: 25%;
      left: 31%;
      /*width: 10%;
        background-color:#428bca;*/
      /*min-height:25px;
        min-width:25px;
        z-index:-1;*/
    }
    .flag-icon-background {
      background-size: contain;
      background-position: 50%;
      background-repeat: no-repeat;
    }
    .flag-icon-eur {
      background-image: url('/app/img/EUFlag.png');
      width: : 165px;
    }
  </style>

  <div class="container-fluid" id="wrapper">
    <div class="row">
      <div class="col-xs-12" style="padding-top:20px;">

        <!-- Sidebar -->
        <div class="row">

        <div class="col-xs-3">
            <h1 class="special-font">Country Profiles</h1>

            <div class="well" ng-show="true">



            <!-- <span>Country List</span> -->


            <div style="padding-bottom:10px;">
              <i class="pull-right fa fa-globe fa-lg" ng-click="showMap(true);" style="cursor:pointer">&nbsp;View Map</i>
              <div style="font-size:16;font-weight:bold;">Nagoya Protocol Party status</div>
              <span class="label label-primary">&nbsp;</span> Party
              <br>
              <span class="label label-success">&nbsp;</span> Inbetween party
              <br>
              <span class="label label-info">&nbsp;</span> Signatory
              <br>
              <span class="label label-default">&nbsp;</span> Non-Party
            </div>

            <input type="textbox" ng-model="countryFilter" placeholder="filter by country name." class="form-control form-control-small">

            <div style="max-height:500px;overflow:scroll;">
              <ul class="list-group">
                <li class="list-group-item" ng-show="!countries">loading countries<i class="fa fa-spinner" />

                  <li ng-click="loadCountryDetails(country.code)" class="list-group-item" ng-repeat="country in countries | filter:countryFilter" style="cursor:pointer" ng-animate="{enter: 'animate-enter', leave: 'animate-leave'}" ng-class="{'list-group-item-info':country.isSignatory && !country.isRatified,
                      'list-group-item-primary':country.isRatified,
                      'list-group-item-default':!country.isRatified && !country.isSignatory,
                      'list-group-item-success' : country.isInbetweenParty}">

                    <div class="flag-icon-background flag-icon-{{country.code.toLowerCase()}}"></div>
                    {{country.name |lstring}}
                    <div>
                        <i class="mdi-action-account-box" style="font-size:16pt;position:relative;top:3px;" ng-show="country.CNA" data-toggle="tooltip" data-placement="right"  title="Competent National Authority">{{country.CNA}}</i>
                        <i class="mdi-action-verified-user" style="font-size:16pt;position:relative;top:3px;" ng-show="country.CP" data-toggle="tooltip" data-placement="bottom"  title="Checkpoints">{{country.CP}}</i>
                        <i class="mdi-action-stars" style="font-size:16pt;position:relative;top:3px;" ng-show="country.MSR" data-toggle="tooltip" data-placement="bottom"  title="Legislative, administrative or policy measures">{{country.MSR}}</i>
                        <i class="mdi-action-bookmark" style="font-size:16pt;position:relative;top:3px;" ng-show="country.IRCC" data-toggle="tooltip" data-placement="bottom"  title="Internationally Recognized Certificate of Compliance">{{country.IRCC}}</i>
                        <i class="mdi-communication-message" style="font-size:16pt;position:relative;top:3px;" ng-show="country.CPC" data-toggle="tooltip" data-placement="bottom"  title="Checkpoint CommuniquÃ©s">{{country.CPC}}</i>
                        <i class="mdi-file-folder" style="font-size:16pt;position:relative;top:3px;" ng-show="country.NDB" data-toggle="tooltip" data-placement="bottom"  title="National Websites and Databases">{{country.NDB}}</i>
                        <i class="mdi-editor-insert-drive-file" style="font-size:16pt;position:relative;top:3px;" ng-show="country.VLR" data-toggle="tooltip" data-placement="bottom"  title="Virtual Library Records">{{country.VLR}}</i>
                    </div>
                  </li>
              </ul>
            </div>

          </div>
      </div>

          <!-- <div ng-class="{'col-xs-12' : !showlist, 'col-xs-9':showlist}" > -->
          <div class="col-xs-9">

            <div id="page-content-wrapper">
              <div class="page-content inset">
                <!-- Country Map and Other -->
                <div class="container1 ng-scope well" style="background-color:white;min-height:688px;" id="worldMap">
                  <div class="row">
                    <div class="span12">
                      <table align="center" style="width: 90%;text-align:center;" cellspacing="10" cellpadding="10">

                        <tr>
                          <td style="text-align: center; width: 200px;" id="cbdParties">
                            <div style="width: 180px; height: 100px;cursor:pointer;" ng-click="searchFilter=isPartyToCBD;updateMap('party')">

                              <div class="numberCircle" style="width:80px;height:80px;padding-top:20px;background-color:#1FA65D;" ng-class="{'active-circle': selected_circle=='party'}">
                                {{parties}}</div>
                              <div style="padding-top:5px;font-size: 10px; text-transform: uppercase;font-weight:bold;">
                                PARTIES TO THE CBD</div>
                            </div>
                          </td>
                          <td style="text-align:center;width:200px;" id="signatories">
                            <div style="width: 180px; height: 100px;cursor:pointer;" ng-click="searchFilter=isSignatory;updateMap('signatory')">

                              <div class="numberCircle" style="width:80px;height:80px;padding-top:20px;background-color:#5bc0de;" ng-class="{'active-circle': selected_circle=='signatory'}">
                                {{signatures}}</div>
                              <div style="padding-top:5px; font-size: 10px; text-transform: uppercase;font-weight:bold;">
                                Signatures</div>


                            </div>
                          </td>
                          <td style="text-align: center; width: 200px;" id="ratified">
                            <div style="width: 180px; height: 100px;cursor:pointer;" ng-click="searchFilter=isRatified;updateMap('ratified')">

                              <div class="numberCircle" style="width:80px;height:80px;padding-top:20px;background-color:#428bca;" ng-class="{'active-circle': selected_circle=='ratified'}">
                                {{ratifications}}</div>
                              <div style="padding-top:5px;font-size: 10px; text-transform: uppercase;font-weight:bold;">
                                ratifications</div>
                            </div>
                          </td>
                          <td style="text-align:center;width:200px;cursor:pointer;" id="inbetweenParties">
                            <div style=" width: 180px; height: 100px;" ng-click="searchFilter=isInbetweenParties;updateMap('inbetweenParties')">
                              <div class="numberCircle" style="width:80px;height:80px;padding-top:20px;background-color:#5cb85c;" ng-class="{'active-circle': selected_circle=='inbetweenParties'}">
                                {{inbetweenParties}}</div>
                              <div style="padding-top:5px;font-size: 10px; text-transform: uppercase;font-weight:bold;">
                                in-between parties
                              </div>
                            </div>
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-xs-12">
                      <div class="row" style="margin-bottom:-22px;padding-top:20px;padding-bottom:20px;">
                        <a ng-href="#" ng-click="searchFilter=isPartyToCBD;updateMap('party')">
                          <div class="col-xs-8ths" id="myWell" style="height:80px;">


                            <div class="well text-center">
                              <br>
                              <span class="stats-count" ng-class="{'myWell-on': isSelected(facet[0])}">
                                            ALL
                              </span>
                              <br><br>
                              <br>
                            </div>
                          </div>
                        </a>
                        <a ng-href="#" ng-click="selected_facet=facet[0];updateMap(facet[0]);" ng-repeat="facet in commonFormatFacets" style="display:inline;">
                          <div class="col-xs-8ths" id="myWell">
                            <div class="well text-center">

                              <div class="stats-schema">
                                <span ng-show="facet[0]!= 'RAT'">{{facet[0]|lowercase|schemaName}}</span>
                                <span ng-show="facet[0]== 'RAT'">Ratifications</span>
                              </div>

                              <span class="stats-count" ng-class="{'myWell-on': isSelected(facet[0])}">
                                                {{facet[1].facetCount}}
                              </span>
                              <br>
                              <span class="stats-country">
                                                <span ng-show="!facet[1].countryCount">&nbsp;</span>
                              <span ng-show="facet[1].countryCount" style="color:#777">Countries {{facet[1].countryCount}}</span>
                              </span>
                            </div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div id="vmap" style="width: 100%; height: 500px;background-color:#333!important;"></div>
                  </div>

                </div>

                <div class="container1 ng-scope well" style="background-color:white;min-height:688px;" id="countryDetails">

                  <div class="row top " style="padding-bottom:30px;">
                    <div class="col-xs-12 col-md-5 col-lg-5">

                      <span class="country-name">
                         {{country.name.en}}
                      </span>
                      </br>
                      <span style="vertical-align:top" class="label label-success" ng-show="isInbetweenParty()">
                    entry into force on {{entryIntoForceDate| formatDate}}</span>
                    </div>
                    <div class="col-xs-4 col-md-4 col-lg-4">

                      <h3 style="white-space:nowrap;color:#1FA65D;">Nagoya Protocol on ABS</h3>
                      <div class="row" style="text-align:right;">
                        <div class="col-xs-6 col-md-6 col-lg-6">Signature</div>
                        <div class="col-xs-6 col-md-6 col-lg-6">{{ country.treaties.XXVII8b.signature ? country.treaties.XXVII8b.signature : '- - - - - -'}}</div>
                        <div class="col-xs-6 col-md-6 col-lg-6">Instrument</div>
                        <div class="col-xs-6 col-md-6 col-lg-6">{{country.treaties.XXVII8b.instrument ? country.treaties.XXVII8b.instrument : '- - - - - -'}}</div>
                        <div class="col-xs-6 col-md-6 col-lg-6">Deposit</div>
                        <div class="col-xs-6 col-md-6 col-lg-6">{{country.treaties.XXVII8b.deposit ? country.treaties.XXVII8b.deposit : '- - - - - -'}}</div>
                      </div>
                    </div>

                    <div class="col-xs-6 col-md-3 col-lg-3 text-right" style="max-width:20%">
                      <div style="height:100px;" class="flag-icon-background flag-icon-{{code.toLowerCase()}}"></div>
                    </div>

                  </div>
                  <div class="row">

                    <div class="col-sm-12">
                      <div class="pull-right" style="width:30%">
                        <div angucomplete id="ex1" placeholder="search country information" pause="100" localdata="autocompleteData" minlength="1" inputclass="form-control form-control-small" searchfields="title" selectedObject="selectedCountry" searchStr="searchText.$" titlefield="title"
                        />
                      </div>
                      <div class="clearfix"></div>
                      <div class="panel-group" id="accordion">

                        <div class="panel" ng-show="absch_nfp.response.numFound > 0">
                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                            <h4>
			          <span style="color:#111;"><i class="fa fa-plus-circle"></i> </span>
			          <span style="color: #428BCA; ">NFP</span>
			         <span style="color:#111;">National Focal Points ({{nfpCount}})</span>

			         </h4>
                          </a>
                        </div>
                        <div id="collapseOne" class="panel-collapse collapse">
                          <div class="panel-body">
                            <div>
                              <div document-list documents='absch_nfp.response.docs' filter='focalPoint' show-pagination='false' advance-filter="searchText" current-page='currentPage' document-Count='documentCount'></div>
                            </div>
                          </div>
                        </div>


                        <div class="panel">
                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                            <h4>

			          <span style="color:#111;"><i class="fa fa-plus-circle"></i> </span>
			          <span style="color: #428BCA; ">CNA</span>
			         <span style="color:#111;">Competent National Authority ({{nationalAuthority}})</span>
			         </h4>
                          </a>
                        </div>
                        <div id="collapseTwo" class="panel-collapse collapse">
                          <div class="panel-body">
                            <div document-list documents='absch_nfp.response.docs' filter='authority' show-pagination='false' advance-filter="searchText" current-page='currentPage' document-Count='documentCount'></div>
                          </div>
                        </div>

                        <div class="panel">
                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                            <h4>
			          <span style="color:#111;"><i class="fa fa-plus-circle"></i> </span>
			          <span style="color: #428BCA; ">MSR</span>
			         <span style="color:#111;">Legislative, administrative or policy measures on access and benefit-sharing ({{nationalMeasure}})</span>
			         </h4>
                          </a>
                        </div>
                        <div id="collapseThree" class="panel-collapse collapse">
                          <div class="panel-body">
                            <div document-list documents='absch_nfp.response.docs' filter='measure' show-pagination='false' advance-filter="searchText" current-page='currentPage' document-Count='documentCount'></div>
                          </div>
                        </div>


                        <div class="panel">
                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
                            <h4>
			          <span style="color:#111;"><i class="fa fa-plus-circle"></i> </span>
			          <span style="color: #428BCA; ">IRCC</span>
			         <span style="color:#111;">Permit or its equivalent constituting an internationally recognized certificate of compliance ({{Permit}})</span>
			         </h4>
                          </a>
                        </div>
                        <div id="collapseFour" class="panel-collapse collapse">
                          <div class="panel-body">
                            <div document-list documents='absch_nfp.response.docs' filter='absPermit' show-pagination='false' advance-filter="searchText" current-page='currentPage' document-Count='documentCount'></div>
                          </div>
                        </div>


                        <div class="panel">
                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive">
                            <h4>
			        <!--  <div class="numberCircle1" style="padding-left:16px;">
			         {{absCheckpoint}}
			         </div> -->
			          <span style="color:#111;"><i class="fa fa-plus-circle"></i> </span>
			          <span style="color: #428BCA; ">CP</span>
			         <span style="color:#111;">Checkpoint ({{absCheckpoint}})</span>
			         </h4>
                          </a>
                        </div>
                        <div id="collapseFive" class="panel-collapse collapse">
                          <div class="panel-body">
                            <div document-list documents='absch_nfp.response.docs' filter='absCheckpoint' show-pagination='false' advance-filter="searchText" current-page='currentPage' document-Count='documentCount'></div>
                          </div>
                        </div>


                        <div class="panel">
                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseSix">
                            <h4>
			        <!--  <div class="numberCircle1" style="padding-left:16px;">
			         {{absCheckpointCommunique}}
			         </div> -->
			          <span style="color:#111;"><i class="fa fa-plus-circle"></i> </span>
			          <span style="color: #428BCA; ">CPC</span>
			         <span style="color:#111;">Checkpoint CommuniquÃ© ({{absCheckpointCommunique}})</span>
			         </h4>
                          </a>
                        </div>
                        <div id="collapseSix" class="panel-collapse collapse">
                          <div class="panel-body">
                            <div document-list documents='absch_nfp.response.docs' filter='absCheckpointCommunique' show-pagination='false' advance-filter="searchText" current-page='currentPage' document-Count='documentCount'></div>
                          </div>
                        </div>


                        <div class="panel">
                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseSeven">
                            <h4>
			         <!-- <div class="numberCircle1" style="padding-left:16px;">
			         {{database}}
			         </div> -->
			         <span style="color:#111;"><i class="fa fa-plus-circle"></i> </span>
			          <span style="color: #428BCA; ">NDB</span>
		         <span style="color:#111;">ABS National Databases and Websites ({{database}})</span>
			         </h4>
                          </a>
                        </div>
                        <div id="collapseSeven" class="panel-collapse collapse">
                          <div class="panel-body">
                            <div document-list documents='absch_nfp.response.docs' filter='database' show-pagination='false' advance-filter="searchText" current-page='currentPage' document-Count='documentCount'></div>
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
                <!-- end row -->
              </div>
              <!-- end container -->
            </div>
          </div>
        </div>
      </div>

      <!-- end controller -->
    </div>
  </div>
</div>
