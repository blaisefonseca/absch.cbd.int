<link href="/app/css/country.css" rel="stylesheet">
<link href="/app/css/profiles.css" rel="stylesheet">
<link href="/app/css/find.css" rel="stylesheet">
<link href="/app/css/record.css" rel="stylesheet">
<link href="/app/libs/flag-icon-css/css/flag-icon.min.css" rel="stylesheet">
<link href="/app/libs/angucomplete/angucomplete.css" rel="stylesheet">
<link href="/app/libs/jqvmap/jqvmap/jqvmap.css" rel="stylesheet">

<div ng-controller="ProfileController">
    <style>
        .ng-hide-add-active,
        .ng-hide-remove {
            display: inline!important;
        }
        .table-hover:hover {
            background-color: #f5f5f5;
        }
        .border {
            border-bottom: 1px solid #eee;
            padding: 10px 0px 00px 00px;
        }
        .confidential {
            color: #a94442!important;
        }
        .tableheader {
            padding-top: 10px;
            padding-bottom: 10px;
        }
        .table-msr {
            border-bottom: 1px solid #eee;
            padding-left: 20px;
            padding-right: 20px;
        }
        .fullBorder {
            border: 1px solid #eee;
        }
        .sectionHeader {
            border: 1px solid #eee;
            padding: 10px;
            margin-top: 50px;
        }
    </style>

    <div class="container-fluid" id="wrapper">
        <div class="row">

            <div class="col-xs-3" style="padding-top:5px;">
                <h1 class="special-font">Country Information</h1>

                <div style="padding-bottom:10px;">
                    <label class="btn btn-default">
                        <span class="fa fa-globe fa-lg" ng-click="show('map');" style="cursor:pointer">&nbsp;Map</span>
                    </label>
                    <label class="btn btn-default">
                        <span class="fa fa-align-justify fa-lg" ng-click="show('list');" style="cursor:pointer">&nbsp;List</span>
                    </label>
                </div>


                <div class="well" ng-show="true">
                    <div style="padding-bottom:10px;">
                        <div style="font-size:16;font-weight:bold;">Nagoya Protocol Party status</div>
                        <div ng-click="updateMap('ratified')" ng-class="{'myWell-on':type=='ratified'}" style="cursor:pointer;">
                            <span class="label label-primary">&nbsp;</span> Party ({{mapDetails.ratifications}})</div>
                        <div style="cursor:pointer" ng-click="updateMap('inbetweenParty')" ng-class="{'myWell-on':type=='inbetweenParties'}">
                            <span class="label label-success">&nbsp;</span> Inbetween party ({{mapDetails.inbetweenParties}})</div>

                        <div style="cursor:pointer;" ng-click="updateMap('signatory')" ng-class="{'myWell-on':type=='signatory'}">
                            <span class="label label-info">&nbsp;</span> Signatory ({{mapDetails.signatures}})</div>

                        <div style="cursor:pointer" ng-click="updateMap('nonParties')" ng-class="{'myWell-on':type=='nonParties'}">
                            <span class="label label-default">&nbsp;</span> Non-Party ({{mapDetails.parties-mapDetails.ratifications}})</div>
                        <div style="cursor:pointer" ng-click="updateMap('party')" ng-class="{'myWell-on':type=='party'}">
                            <span class="label">&nbsp;</span> All ({{mapDetails.parties}})</div>
                    </div>
                    <div>
                        <strong>Select a country</strong>
                        <input type="textbox" ng-model="countryFilter" placeholder="filter by country name" class="form-control form-control-small">

                        <div class="clearfix"></div>

                        <div style="max-height:500px;overflow:scroll; cursor:pointer;padding:5px;">
                            <ul class="list-group">
                                <li class="row list-group-item" style="min-width:300px;" ng-click="loadCountryDetails(country.code)" ng-repeat="country in countries | filter:countryFilter | filter:searchFilter" ng-class="{'list-group-item-info':country.isSignatory && !country.isRatified,
                            'list-group-item-primary':country.isRatified,
                            'list-group-item-default':!country.isRatified && !country.isSignatory,
                            'list-group-item-success' : country.isInbetweenParty}">
                                    <div class="col-xs-12">{{country.name |lstring}}</div>
                                </li>
                            </ul>
                        </div>


                    </div>
                </div>
            </div>
            <!-- <div ng-class="{'col-xs-12' : !showlist, 'col-xs-9':showlist}" > -->
            <div class="col-xs-9" style="padding-top:20px;">

                <div id="page-content-wrapper">
                    <div class="page-content inset ">
                        <div country-map-list countries="countries" />
                        <div class="panel panel-default ng-scope" style="background-color:white;min-height:800px;" id="countryDetails">
                            <div class="panel-heading" style="marign-bottom:30px;">
                                <table>
                                    <tr>
                                        <td style="width:120px;padding-right:20px;">
                                            <div style="height:100px;" class="flag-icon-background  flag-icon-{{code.toLowerCase()}}"></div>
                                        </td>
                                        <td>
                                            <span class="country-name" style="font-size:300%;">{{country.name.en}}</span>
                                            <h3 style="margin:0;padding:0;padding-top:5px;">
                                                <span style="vertical-align:top" class="label label-info" ng-show="countriescommonjs.isSignatory(country) && !countriescommonjs.isRatified(country)">Signatory</span>
                                                <span style="vertical-align:top" class="label label-success" ng-show="countriescommonjs.isInbetweenParty(country)">Entry into force on {{entryIntoForceDate| formatDate}}</span>
                                                <span style="vertical-align:top" class="label label-default" ng-show="!countriescommonjs.isRatified(country)">Non-Party</span>
                                                <span style="vertical-align:top" class="label label-primary" ng-show="countriescommonjs.isRatified(country) && !countriescommonjs.isInbetweenParty(country)">Party since {{(country.treaties.XXVII8b.deposit ? country.treaties.XXVII8b.deposit : '- - - - - -') | formatDate}} </span>
                                            </h3>
                                        </td>
                                    </tr>
                                </table>
                            </div>

                            <div class="panel-body">
                                <div class="col-xs-12">

                                    <div class="clearfix"></div>

                                    <div class="row sectionHeader">
                                        <h3>National Contacts and Information
                                            <a ng-href="#" ng-click="showContacts = !showContacts">
                                                <i class="fa fa-chevron-circle-up" ng-show="showContacts"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showContacts"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder" ng-show="showContacts">
                                        <br/>
                                        <div class="col-xs-4" ng-repeat="contact in absch_nfp|filter:isContactInformation|orderBy:schema_s">
                                            <div class="panel panel-default" ng-class="{'panel-success':(contact.type_ss.indexOf('ABS-IC')>=0 || contact.type_ss.indexOf('NP-FP')>=0),
                                        'panel-warning':contact.schema_s=='absCheckpoint',
                                        'panel-info':contact.schema_s=='authority'||contact.schema_s=='database'}">
                                                <div class="panel-heading">
                                                    <h4 class="panel-title">
                                                        <i ng-class="{'fa fa-user':(contact.schema_s=='focalPoint'||contact.schema_s=='authority'),
                                                         'mdi-action-verified-user':contact.schema_s=='absCheckpoint',
                                                         'mdi-file-folder':contact.schema_s=='database'}"></i> {{getTitle(contact.schema_s,contact.type_ss,contact.schema_EN_t)}}
                                                    </h4>
                                                </div>
                                                <div class="panel-body">
                                                    <strong>{{contact.title_t}}</strong>
                                                    <div ng-show="contact.description_t" ng-bind-html="contact.description_t"></div>
                                                    <div ng-show="contact.telephone_s"><i class="fa fa-phone" />{{contact.telephone_s}}</div>
                                                    <div ng-show="contact.telephones" ng-repeat="item in contact.telephones"><i class="fa fa-phone" />{{item}}</div>
                                                    <div ng-show="contact.fax_ss">
                                                        <a href="mailto:{{item}}" ng-repeat="item in contact.fax_ss"><i class="fa fa-fax" />{{item}}</a>
                                                    </div>
                                                    <div ng-show="contact.email_ss">
                                                        <a href="mailto:{{item}}" ng-repeat="item in contact.email_ss"><i class="fa fa-envelope-o" />{{item}}</a>
                                                    </div>
                                                    <div ng-show="contact.emails" ng-repeat="item in contact.emails"><a ng-href="mailto:{{item}}"><i class="fa fa-envelope-o"></i> {{item}}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row sectionHeader">
                                        <h3>Legislative, administrative or policy measures on access and benefit-sharing (MSR)
                                            <a ng-href="#" ng-click="showMSR = !showMSR">
                                                <i class="fa fa-chevron-circle-up" ng-show="showMSR"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showMSR"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder " ng-show="showMSR">
                                        <div class="col-xs-12">
                                            <!-- <table class="table table-hover table-msr" style="width:100%;"> -->

                                            <div class="row table-hover table-msr">
                                                <div class="col-lg-3 col-md-3 col-xs-3 tableheader">name</div>
                                                <div class="col-lg-3 col-md-3 col-xs-3 tableheader">type</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">status</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">jurisdiction</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">date</div>
                                            </div>
                                            <div class="row table-hover table-msr" ng-repeat="measure in absMeasure = (absch_nfp|filter:isMeasure)">
                                                <div class="row border">
                                                    <div class="col-lg-3 col-md-3 col-xs-3">
                                                        <a ng-click="displayDetails=!displayDetails;showDetails(measure)" ng-href="#">{{measure.title_t}}</a>
                                                        <i class="fa fa-refresh fa-spin" ng-show="displayDetails&& !measure.data" />
                                                    </div>
                                                    <div class="col-lg-3 col-md-3 col-xs-3">{{measure.type_EN_t}}</div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">{{measure.status_EN_t}}</div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">{{measure.jurisdiction_EN_t}}</div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">{{measure.entryIntoForce_dt|formatDate}}</div>
                                                    <div class="row">
                                                        <i class="glyphicon glyphicon-remove-circle circle pull-right" style="position:relative;top:40px;z-index:100;font-size:20px;color:white;" ng-click="displayDetails=!displayDetails;"></i>
                                                        <div class="col-xs-12 details document-show-hide" ng-show="displayDetails" record-loader document="measure.data" hide="title;header;libraries"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" ng-show="absMeasure.length==0">
                                                <div class="col-lg-10 col-md-12 col-xs-12 tableheader color-orange">No Legislative, administrative or policy measures on access and benefit-sharing (MSR) available</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                    <div class="row sectionHeader">
                                        <h3>Internationally Recognized Certificates of Compliance (IRCC)
                                            <a ng-href="#" ng-click="showIRCC = !showIRCC">
                                                <i class="fa fa-chevron-circle-up" ng-show="showIRCC"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showIRCC"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder " ng-show="showIRCC">
                                        <div class="col-xs-12">
                                            <div class="row table-msr">
                                                <div class="col-lg-3 col-md-3 col-xs-3 tableheader">name</div>
                                                <div class="col-lg-3 col-md-3 col-xs-3 tableheader">issued to</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">subject matter</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">use</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">date of issue</div>
                                            </div>
                                            <div class="row table-hover table-msr" ng-repeat="permit in absPermit = (absch_nfp|filter:isPermit)">
                                                <div class="row border">
                                                    <div class="col-lg-3 col-md-3 col-xs-3">
                                                        <a ng-click="displayDetails=!displayDetails;showDetails(permit)" ng-href="#">{{permit.title_t}}</a>
                                                        <i class="fa fa-refresh fa-spin" ng-show="displayDetails&& !permit.data" />
                                                    </div>
                                                    <div class="col-lg-3 col-md-3 col-xs-3">
                                                        <div class="confidential" ng-show="!permit.informedConsents_CEN_ss">Confidential information</div>
                                                        {{permit.informedConsents_CEN_ss}}
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <div class="confidential" ng-show="!permit.keywords_CEN_ss">Confidential information</div>
                                                        <span ng-repeat="keyword in permit.keywords_CEN_ss">{{parseJSON(keyword)|lstring}}{{$last ? '':', '}}</span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span ng-repeat="usage in permit.usage_CEN_ss">{{parseJSON(usage)|lstring}}{{$last ? '':', '}}
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">{{permit.date_dt|formatDate}}</div>
                                                    <div class="row">
                                                        <i class="glyphicon glyphicon-remove-circle circle pull-right" style="position:relative;top:40px;z-index:100;font-size:20px;color:white;" ng-click="displayDetails=!displayDetails;"></i>
                                                        <div class="col-xs-12 details document-show-hide" ng-show="displayDetails" record-loader document="permit.data" hide="title;header;libraries"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" ng-show="absMeasure.length==0">
                                                <div class="col-lg-10 col-md-12 col-xs-12 tableheader color-orange">No Internationally Recognized Certificates of Compliance (IRCC)</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                    <div class="row sectionHeader">
                                        <h3>Checkpoint Communiqués (CPC)
                                            <span class="label label-info">SENT</span>
                                            <a ng-href="#" ng-click="showCPCSent = !showCPCSent">
                                                <i class="fa fa-chevron-circle-up" ng-show="showCPCSent"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showCPCSent"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder " ng-show="showCPCSent">
                                        <div class="col-xs-12">
                                            <div class="row table-msr">
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">checkpoint</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">title</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">source country</div>
                                                <div class="col-lg-1 col-md-1 col-xs-1 tableheader">user</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">subject matter</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">IRCC</div>
                                                <div class="col-lg-1 col-md-1 col-xs-1 tableheader">sent</div>
                                            </div>
                                            <div class="row table-hover table-msr" ng-repeat="communique in absCommunique = (absch_nfp|filter:isCheckpointCommunique)">
                                                <div class="row border" style="padding-top: 10px;padding-bottom: 10px;">
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span ng-repeat="checkpoint in communique.checkpoint_CEN_ss">
                                                            {{parseJSON(checkpoint)|lstring}}
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <a ng-href="#" ng-click="displayDetails=!displayDetails;showDetails(communique)">{{communique.title_t}}</a>
                                                        <i class="fa fa-refresh fa-spin" ng-show="displayDetails && !communique.data" />
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span ng-repeat="country in communique.originCountries_CEN_ss">{{parseJSON(country)|lstring}}
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-1 col-md-1 col-xs-1">
                                                        <span ng-repeat="user in communique.geneticRessourceUsers">{{user.organization|lstring}}
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span ng-repeat="keyword in communique.keywords_CEN_ss">{{parseJSON(keyword)|lstring}}{{$last ? '':', '}}</span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span ng-show="!communique.permit_ss">Not available</span>
                                                        <span ng-repeat="permit in communique.permit_ss">
                                                            <a ng-href="/database/{{permit|uniqueIDWithoutRevision}}" target="_new">{{permit|uniqueIDWithoutRevision}}</a>
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-1 col-md-1 col-xs-1">{{communique.createdDate_dt|formatDate}}</div>

                                                    <div class="row">
                                                        <i ng-show="displayDetails" class="glyphicon glyphicon-remove-circle circle pull-right" style="position:relative;top:{{40 + (communique.permit_ss ? communique.permit_ss.length*10 :0  )}}px;z-index:100;font-size:20px;color:white;" ng-click="displayDetails=!displayDetails;"></i>
                                                        <div class="col-xs-12 details document-show-hide" ng-show="displayDetails" record-loader document="communique.data" hide="title;header;libraries"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row" ng-show="absCommunique.length==0">
                                                <div class="col-lg-10 col-md-12 col-xs-12 tableheader color-orange">No Checkpoint Communiqués (CPC) sent</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                    <div class="row sectionHeader">
                                        <h3>Checkpoint Communiqués (CPC)
                                            <span class="label label-warning">RECEIVED</span>
                                            <a ng-href="#" ng-click="showCPCRecv = !showCPCRecv">
                                                <i class="fa fa-chevron-circle-up" ng-show="showCPCRecv"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showCPCRecv"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder " ng-show="showCPCRecv">
                                        <div class="col-xs-12">
                                            <div class="row table-msr">
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">issuing country</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">checkpoint</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">title</div>
                                                <div class="col-lg-1 col-md-1 col-xs-1 tableheader">user</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">subject matter</div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader">IRCC</div>
                                                <div class="col-lg-1 col-md-1 col-xs-1 tableheader">sent</div>
                                            </div>
                                            <div class="row table-hover table-msr" ng-repeat="communique in cpcReceived">
                                                <div class="row border" style="padding-top: 10px;padding-bottom: 10px;">
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span>{{communique.government_s|term}}
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span ng-repeat="checkpoint in communique.checkpoint_CEN_ss">
                                                            {{parseJSON(checkpoint)|lstring}}
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <a ng-href="#" ng-click="displayDetails=!displayDetails;showDetails(communique)">{{communique.title_t}}</a>
                                                        <i class="fa fa-refresh fa-spin" ng-show="displayDetails && !communique.data" />
                                                    </div>
                                                    <div class="col-lg-1 col-md-1 col-xs-1">
                                                        <span ng-repeat="user in communique.geneticRessourceUsers">{{user.organization|lstring}}
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span ng-repeat="keyword in communique.keywords_CEN_ss">{{parseJSON(keyword)|lstring}}{{$last ? '':', '}}</span>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-xs-2">
                                                        <span ng-show="!communique.permit_ss">Not available</span>
                                                        <span ng-repeat="permit in communique.permit_ss">
                                                            <a ng-href="/database/{{permit|uniqueIDWithoutRevision}}" target="_new">{{permit|uniqueIDWithoutRevision}}</a>
                                                            <br/>
                                                        </span>
                                                    </div>
                                                    <div class="col-lg-1 col-md-1 col-xs-1">{{communique.createdDate_dt|formatDate}}</div>

                                                    <div class="row">
                                                        <i ng-show="displayDetails" class="glyphicon glyphicon-remove-circle circle pull-right" style="position:relative;top:{{40 + (communique.permit_ss ? communique.permit_ss.length*10 :0  )}}px;z-index:100;font-size:20px;color:white;" ng-click="displayDetails=!displayDetails;"></i>
                                                        <div class="col-xs-12 details document-show-hide" ng-show="displayDetails" record-loader document="communique.data" hide="title;header;libraries"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row" ng-show="cpcReceived.length==0">
                                                <div class="col-lg-10 col-md-12 col-xs-12 tableheader color-orange">No Checkpoint Communiqués (CPC) received</div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- end row -->



                    </div>
                    <!-- end container -->


                </div>
            </div>
        </div>

        <!-- end controller -->
    </div>
</div>
</div>
