<link href="/app/css/country.css" rel="stylesheet">
<link href="/app/css/profiles.css" rel="stylesheet">
<link href="/app/css/find.css" rel="stylesheet">
<link href="/app/css/record.css" rel="stylesheet">
<link href="/app/libs/flag-icon-css/css/flag-icon.min.css" rel="stylesheet">
<link href="/app/css/profile-map.css" rel="stylesheet">

<div ng-controller="ProfileController">

    <style>
        .ng-hide-add-active,
        .ng-hide-remove {
            display: inline!important;
        }
        .table-hover:hover {
            background-color: #f5f5f5;
        }
        .table-row{
            cursor: pointer;
        }
        .border {
            border-bottom: 1px solid #eee;
            padding: 10px 0px 00px 00px;
        }
        .confidential {
            color: #a94442!important;
        }
        .tableheader {
            padding-top: 10px;
            padding-bottom: 10px;
            padding-right: 0px;
            cursor: pointer
        }
        .table-msr {
            border-bottom: 1px solid #eee;
            padding-left: 20px;
            padding-right: 20px;
        }
        .fullBorder {
            border: 1px solid #eee;
        }
        .sectionHeader {
            border: 1px solid #eee;
            padding: 10px;
            margin-top: 50px;
        }
        .btn-panel-warning {
            color: #8a6d3b;
            background-color: #fcf8e3;
            border-color: #faebcc;
        }
        .btn-panel-info {
            color: #31708f;
            background-color: #d9edf7;
            border-color: #bce8f1;
        }
        .btn-panel-success {
            color: #3c763d;
            background-color: #dff0d8;
            border-color: #d6e9c6;
        }
    </style>

    <div class="container-fluid" id="wrapper">
        <div class="row">

            <div class="col-xs-3" style="padding-top:5px;">
                <span countries-left-menu finish-loading-countries="finishLoading()" on-status-click="statusFilter(data);">
            </div>
            <!-- <div ng-class="{'col-xs-12' : !showlist, 'col-xs-9':showlist}" > -->
            <div class="col-xs-9" style="padding-top:20px;">

                <div id="page-content-wrapper">
                    <div class="page-content inset ">
                        <div class="panel panel-default ng-scope" style="background-color:white;min-height:800px;" id="countryDetails">
                            <div class="panel-heading" style="marign-bottom:30px;">
                                <table>
                                    <tr>
                                        <td style="width:120px;padding-right:20px;">
                                            <div style="height:100px;" class="flag-icon-background  flag-icon-{{code.toLowerCase()}}"></div>
                                        </td>
                                        <td>
                                            <span class="country-name" style="font-size:300%;">{{country.name.en}}</span>
                                            <h3 style="margin:0;padding:0;padding-top:5px;">
                                                <span style="vertical-align:top;margin-right:5px" class="label label-default" ng-show="!countriescommonjs.isNpParty(country)">Non-Party</span>
                                                <span style="vertical-align:top;margin-right:5px" class="label label-primary" ng-show="countriescommonjs.isNpParty(country)">Party</span>
                                                <span style="vertical-align:top;margin-right:5px" class="label label-info" ng-show="countriescommonjs.isNPSignatory(country) && !countriescommonjs.isNPParty(country)">Signatory</span>
                                                <span style="vertical-align:top;margin-right:5px" class="label label-primary" ng-show="countriescommonjs.isNPParty(country)">Date of {{country.treaties.XXVII8b.instrument}} {{(country.treaties.XXVII8b.deposit ? country.treaties.XXVII8b.deposit : '- - - - - -') | formatDate}} </span>
                                                <span style="vertical-align:top;margin-right:5px" class="label label-success" ng-show="countriescommonjs.isNPParty(country)">Date of Entry into force {{country.treaties.XXVII8b.party| formatDate}}</span>
                                            </h3>
                                        </td>
                                    </tr>
                                </table>
                            </div>

                            <div class="panel-body">
                                <div class="col-xs-12">

                                    <div class="clearfix"></div>

                                    <div class="row sectionHeader">
                                        <h3>National Contacts and Information
                                            <a ng-href="#" ng-click="showContacts = !showContacts">
                                                <i class="fa fa-chevron-circle-up" ng-show="showContacts"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showContacts"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder" ng-show="showContacts">
                                        <br/>
                                        <div class="row" style="padding-left:20px;">
                                            <div class="col-lg-12 col-sm-12 col-xs-12">
                                                <button class="btn btn-primary" ng-click="filterSchema=null">
                                                    <i class="fa fa-th-list"></i> All
                                                    <span class="badge">{{absCheckpoint + nfpCount + database + nationalAuthority}}</span>
                                                </button>
                                                <button class="btn btn-panel-warning" ng-click="filterSchema=isCheckpoint">
                                                    <i class="mdi-action-verified-user"></i> Checkpoints
                                                    <span class="badge">{{absCheckpoint}}</span>
                                                </button>
                                                <button class="btn btn-panel-success" ng-click="filterSchema=isFocalpoint">
                                                    <i class="fa fa-user"></i> Focal points
                                                    <span class="badge">{{nfpCount}}</span>
                                                </button>
                                                <button class="btn btn-panel-info" ng-click="filterSchema=isDatabase">
                                                    <i class="mdi-file-folder"></i> Database
                                                    <span class="badge">{{database}}</span>
                                                </button>
                                                <button class="btn btn-panel-info" ng-click="filterSchema=isCNA">
                                                    <i class="fa fa-user"></i> CNA
                                                    <span class="badge">{{nationalAuthority}}</span>
                                                </button>
                                            </div>
                                        </div>
                                        <br/>
                                        <div ng-repeat="contact in absch_nfp|filter:isContactInformation|filter:filterSchema|orderBy:'schema_s':false">
                                            <div ng-class="{'row': ($index)%3==0}"> </div>
                                            <div class="col-xs-4">
                                                <div class="panel panel-default" ng-class="{'panel-success':(contact.type_ss.indexOf('NP-FP')>=0 || contact.type_ss.indexOf('ABS-FP')>=0),
                                                                                            'panel-warning':contact.schema_s=='absCheckpoint',
                                                                                            'panel-info':contact.schema_s=='authority'||contact.schema_s=='database'}">
                                                    <div class="panel-heading">
                                                        <h4 class="panel-title">
                                                            <i ng-class="{'fa fa-user':(contact.schema_s=='focalPoint'||contact.schema_s=='authority'),
                                                             'mdi-action-verified-user':contact.schema_s=='absCheckpoint',
                                                             'mdi-file-folder':contact.schema_s=='database'}"></i> {{getTitle(contact.schema_s,contact.type_ss,contact.schema_EN_t)}}
                                                        </h4>
                                                    </div>
                                                    <div class="panel-body">
                                                        <strong>
                                                            <a ng-show="contact.schema_s!='focalPoint'" ng-href="/database/{{contact.doc|uniqueIDWithoutRevision}}">{{contact.title_t}}</a>
                                                            <a ng-show="contact.schema_s=='focalPoint'" ng-href="/database/focalPoint/{{contact.documentId}}">{{contact.title_t}}</a>
                                                        </strong>
                                                        <div ng-show="contact.description_t" ng-bind-html="contact.description_t"></div>

                                                        <ul ng-show="contact.telephones || contact.telephone_s || contact.fax_ss" style="list-style-type: none;padding:0;margin:0;">
                                                            <li ng-show="contact.telephone_s"><i class="fa fa-phone-square" /> {{contact.telephone_s}}</li>
                                                            <li ng-repeat="item in contact.telephones"><i class="fa fa-phone-square" /> {{item}}</li>
                                                            <li ng-repeat="item in contact.fax_ss"><i class="fa fa-fax" /> {{item}}</li>
                                                        </ul>
                                                        <ul ng-show="contact.emails || contact.email_ss" style="list-style-type: none;padding:0;margin:0;">
                                                            <li ng-repeat="item in contact.emails || contact.email_ss"><a ng-href="mailto:{{item}}"><i class="fa fa-envelope-o"></i> {{item}}</a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row sectionHeader">
                                        <h3>Legislative, administrative or policy measures on access and benefit-sharing (MSR)
                                            <a ng-href="#" ng-click="showMSR = !showMSR">
                                                <i class="fa fa-chevron-circle-up" ng-show="showMSR"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showMSR"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder " ng-show="showMSR">
                                        <div class="col-xs-12">
                                            <!-- <table class="table table-hover table-msr" style="width:100%;"> -->
                                            <div class="row table-hover table-msr">
                                                <div class="col-lg-3 col-md-3 col-xs-3 tableheader" ng-click="sortMeasure='title_t';reverseMeasure=!reverseMeasure">name
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortMeasure=='title_t' && reverseMeasure),'fa-caret-down':(sortMeasure=='title_t' && !reverseMeasure)}"></i>
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-xs-3 tableheader" ng-click="sortMeasure='type_EN_t';reverseMeasure=!reverseMeasure">type <i class="fa" ng-class="{'fa-caret-up':sortMeasure=='type_EN_t' && reverseMeasure,'fa-caret-down':sortMeasure=='type_EN_t' && !reverseMeasure}" />
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortMeasure='status_EN_t';reverseMeasure=!reverseMeasure">status <i class="fa" ng-class="{'fa-caret-up':sortMeasure=='status_EN_t' && reverseMeasure,'fa-caret-down':sortMeasure=='status_EN_t' && !reverseMeasure}" />
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortMeasure='jurisdiction_EN_t';reverseMeasure=!reverseMeasure">jurisdiction <i class="fa" ng-class="{'fa-caret-up':sortMeasure=='jurisdiction_EN_t' && reverseMeasure,'fa-caret-down':sortMeasure=='jurisdiction_EN_t' && !reverseMeasure}" />
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortMeasure='entryIntoForce_dt';reverseMeasure=!reverseMeasure">date <i class="fa" ng-class="{'fa-caret-up':sortMeasure=='entryIntoForce_dt' && reverseMeasure,'fa-caret-down':sortMeasure=='entryIntoForce_dt' && !reverseMeasure}" />
                                                </div>
                                            </div>
                                            <div class="row table-hover table-msr" ng-repeat="measure in absMeasure = (absch_nfp|filter:isMeasure|orderBy:sortMeasure:reverseMeasure)">
                                                <div class="row border">
                                                    <div ng-click="displayDetails=!displayDetails;showDetails(measure)" class="row table-row">
                                                        <div class="col-lg-3 col-md-3 col-xs-3">
                                                            {{measure.title_t}}
                                                            <i class="fa fa-refresh fa-spin" ng-show="displayDetails&& !measure.data" />
                                                        </div>
                                                        <div class="col-lg-3 col-md-3 col-xs-3">{{measure.type_EN_t}}</div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">{{measure.status_EN_t}}</div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">{{measure.jurisdiction_EN_t}}</div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">{{measure.entryIntoForce_dt|formatDate}}</div>
                                                    </div>
                                                    <div class="row">
                                                        <i class="glyphicon glyphicon-remove-circle circle pull-right" style="position:relative;top:40px;z-index:100;font-size:20px;color:white;" ng-click="displayDetails=!displayDetails;"></i>
                                                        <div class="col-xs-12 details document-show-hide" ng-show="displayDetails" record-loader document="measure.data" hide="title;header;libraries"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" ng-show="absMeasure.length==0">
                                                <div class="col-lg-10 col-md-12 col-xs-12 tableheader color-orange">No Legislative, administrative or policy measures on access and benefit-sharing (MSR) available</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                    <div class="row sectionHeader">
                                        <h3>Internationally Recognized Certificates of Compliance (IRCC)
                                            <a ng-href="#" ng-click="showIRCC = !showIRCC">
                                                <i class="fa fa-chevron-circle-up" ng-show="showIRCC"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showIRCC"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder " ng-show="showIRCC">
                                        <div class="col-xs-12">
                                            <div class="row table-msr">
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortPermit='title_t';reversePermit=!reversePermit">name
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortPermit=='title_t' && reversePermit),'fa-caret-down':(sortPermit=='title_t' && !reversePermit)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortPermit='informedConsents_CEN_ss';reversePermit=!reversePermit">issued to
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortPermit=='informedConsents_CEN_ss' && reversePermit),'fa-caret-down':(sortPermit=='informedConsents_CEN_ss' && !reversePermit)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortPermit='authority_s';reversePermit=!reversePermit">CNA
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortPermit=='authority_s' && reversePermit),'fa-caret-down':(sortPermit=='authority_s' && !reversePermit)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortPermit='keywords_CEN_ss';reversePermit=!reversePermit">subject matter
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortPermit=='keywords_CEN_ss' && reversePermit),'fa-caret-down':(sortPermit=='keywords_CEN_ss' && !reversePermit)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortPermit='usage_CEN_ss';reversePermit=!reversePermit">use
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortPermit=='usage_CEN_ss' && reversePermit),'fa-caret-down':(sortPermit=='usage_CEN_ss' && !reversePermit)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortPermit='date_dt';reversePermit=!reversePermit">date of issue
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortPermit=='date_dt' && reversePermit),'fa-caret-down':(sortPermit=='date_dt' && !reversePermit)}"></i>
                                                </div>
                                            </div>
                                            <div class="row table-hover table-msr" ng-repeat="permit in absPermit = (absch_nfp|filter:isPermit|orderBy:sortPermit:reversePermit)">
                                                <div class="row border">
                                                    <div ng-click="displayDetails=!displayDetails;showDetails(permit)" class="row table-row">
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            {{permit.title_t}}
                                                            <i class="fa fa-refresh fa-spin" ng-show="displayDetails&& !permit.data" />
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <div class="confidential" ng-show="!permit.informedConsents_CEN_ss">Confidential information</div>
                                                            {{permit.informedConsents_CEN_ss}}
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            {{parseJSON(permit.authority_s).firstName + ' ' + parseJSON(permit.authority_s).lastName}}
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <div class="confidential" ng-show="!permit.keywords_CEN_ss">Confidential information</div>
                                                            <span ng-repeat="keyword in permit.keywords_CEN_ss">{{parseJSON(keyword)|lstring}}{{$last ? '':', '}}</span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span ng-repeat="usage in permit.usage_CEN_ss">{{parseJSON(usage)|lstring}}{{$last ? '':', '}}
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">{{permit.date_dt|formatDate}}</div>
                                                    </div>
                                                    <div class="row">
                                                        <i class="glyphicon glyphicon-remove-circle circle pull-right" style="position:relative;top:40px;z-index:100;font-size:20px;color:white;" ng-click="displayDetails=!displayDetails;"></i>
                                                        <div class="col-xs-12 details document-show-hide" ng-show="displayDetails" record-loader document="permit.data" hide="title;header;libraries"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" ng-show="absMeasure.length==0">
                                                <div class="col-lg-10 col-md-12 col-xs-12 tableheader color-orange">No Internationally Recognized Certificates of Compliance (IRCC)</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                    <div class="row sectionHeader">
                                        <h3>Checkpoint Communiqués (CPC)
                                            <span class="label label-info">SENT</span>
                                            <a ng-href="#" ng-click="showCPCSent = !showCPCSent">
                                                <i class="fa fa-chevron-circle-up" ng-show="showCPCSent"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showCPCSent"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder " ng-show="showCPCSent">
                                        <div class="col-xs-12">
                                            <div class="row table-msr">
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPC='checkpoint_CEN_ss';reverseCPC=!reverseCPC">checkpoint
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPC=='checkpoint_CEN_ss' && reverseCPC),'fa-caret-down':(sortCPC=='checkpoint_CEN_ss' && !reverseCPC)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPC='title_t';reverseCPC=!reverseCPC">title
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPC=='title_t' && reverseCPC),'fa-caret-down':(sortCPC=='title_t' && !reverseCPC)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPC='originCountries_CEN_ss';reverseCPC=!reverseCPC">source country
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPC=='originCountries_CEN_ss' && reverseCPC),'fa-caret-down':(sortCPC=='originCountries_CEN_ss' && !reverseCPC)}"></i>
                                                </div>
                                                <div class="col-lg-1 col-md-1 col-xs-1 tableheader" ng-click="sortCPC='geneticRessourceUsers';reverseCPC=!reverseCPC">user
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPC=='geneticRessourceUsers' && reverseCPC),'fa-caret-down':(sortCPC=='geneticRessourceUsers' && !reverseCPC)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPC='keywords_CEN_ss';reverseCPC=!reverseCPC">subject matter
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPC=='keywords_CEN_ss' && reverseCPC),'fa-caret-down':(sortCPC=='keywords_CEN_ss' && !reverseCPC)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPC='permit_ss';reverseCPC=!reverseCPC">IRCC
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPC=='permit_ss' && reverseCPC),'fa-caret-down':(sortCPC=='permit_ss' && !reverseCPC)}"></i>
                                                </div>
                                                <div class="col-lg-1 col-md-1 col-xs-1 tableheader" ng-click="sortCPC='createdDate_dt';reverseCPC=!reverseCPC">sent
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPC=='createdDate_dt' && reverseCPC),'fa-caret-down':(sortCPC=='createdDate_dt' && !reverseCPC)}"></i>
                                                </div>
                                            </div>
                                            <div class="row table-hover table-msr" ng-repeat="communique in absCommunique = (absch_nfp|filter:isCheckpointCommunique|orderBy:sortCPC:reverseCPC)">
                                                <div class="row border" style="padding-top: 10px;padding-bottom: 10px;">
                                                    <div ng-click="displayDetails=!displayDetails;showDetails(communique)" class="row table-row">
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span ng-repeat="checkpoint in communique.checkpoint_CEN_ss">
                                                                {{parseJSON(checkpoint)|lstring}}
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            {{communique.title_t}}
                                                            <i class="fa fa-refresh fa-spin" ng-show="displayDetails && !communique.data" />
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span ng-repeat="country in communique.originCountries_CEN_ss">{{parseJSON(country)|lstring}}
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-1 col-md-1 col-xs-1">
                                                            <span ng-repeat="user in communique.geneticRessourceUsers">{{user.organization|lstring}}
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span ng-repeat="keyword in communique.keywords_CEN_ss">{{parseJSON(keyword)|lstring}}{{$last ? '':', '}}</span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span ng-show="!communique.permit_ss">Not available</span>
                                                            <span ng-repeat="permit in communique.permit_ss">
                                                                <a ng-href="/database/{{permit|uniqueIDWithoutRevision}}" target="_new">{{permit|uniqueIDWithoutRevision}}</a>
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-1 col-md-1 col-xs-1">{{communique.createdDate_dt|formatDate}}</div>
                                                    </div>

                                                    <div class="row">
                                                        <i ng-show="displayDetails" class="glyphicon glyphicon-remove-circle circle pull-right" style="position:relative;top:{{40 + (communique.permit_ss ? communique.permit_ss.length*10 :0  )}}px;z-index:100;font-size:20px;color:white;" ng-click="displayDetails=!displayDetails;"></i>
                                                        <div class="col-xs-12 details document-show-hide" ng-show="displayDetails" record-loader document="communique.data" hide="title;header;libraries"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row" ng-show="absCommunique.length==0">
                                                <div class="col-lg-10 col-md-12 col-xs-12 tableheader color-orange">No Checkpoint Communiqués (CPC) sent</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                    <div class="row sectionHeader">
                                        <h3>Checkpoint Communiqués (CPC)
                                            <span class="label label-warning">RECEIVED</span>
                                            <a ng-href="#" ng-click="showCPCRecv = !showCPCRecv">
                                                <i class="fa fa-chevron-circle-up" ng-show="showCPCRecv"></i>
                                                <i class="fa fa-chevron-circle-down" ng-show="!showCPCRecv"></i>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="row fullBorder " ng-show="showCPCRecv">
                                        <div class="col-xs-12">
                                            <div class="row table-msr">
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPCReceived='government_s';reverseCPCReceived=!reverseCPCReceived">issuing country
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPCReceived=='government_s' && reverseCPCReceived),'fa-caret-down':(sortCPCReceived=='government_s' && !reverseCPCReceived)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPCReceived='checkpoint_CEN_ss';reverseCPCReceived=!reverseCPCReceived">checkpoint
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPCReceived=='checkpoint_CEN_ss' && reverseCPCReceived),'fa-caret-down':(sortCPCReceived=='checkpoint_CEN_ss' && !reverseCPCReceived)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPCReceived='title_t';reverseCPCReceived=!reverseCPCReceived">title
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPCReceived=='title_t' && reverseCPCReceived),'fa-caret-down':(sortCPCReceived=='title_t' && !reverseCPCReceived)}"></i>
                                                </div>
                                                <div class="col-lg-1 col-md-1 col-xs-1 tableheader" ng-click="sortCPCReceived='geneticRessourceUsers';reverseCPCReceived=!reverseCPCReceived">user
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPCReceived=='geneticRessourceUsers' && reverseCPCReceived),'fa-caret-down':(sortCPCReceived=='geneticRessourceUsers' && !reverseCPCReceived)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPCReceived='keywords_CEN_ss';reverseCPCReceived=!reverseCPCReceived">subject matter
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPCReceived=='keywords_CEN_ss' && reverseCPCReceived),'fa-caret-down':(sortCPCReceived=='keywords_CEN_ss' && !reverseCPCReceived)}"></i>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-xs-2 tableheader" ng-click="sortCPCReceived='permit_ss';reverseCPCReceived=!reverseCPCReceived">IRCC
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPCReceived=='permit_ss' && reverseCPCReceived),'fa-caret-down':(sortCPCReceived=='permit_ss' && !reverseCPCReceived)}"></i>
                                                </div>
                                                <div class="col-lg-1 col-md-1 col-xs-1 tableheader" ng-click="sortCPCReceived='createdDate_dt';reverseCPCReceived=!reverseCPCReceived">sent
                                                    <i class="fa" ng-class="{'fa-caret-up':(sortCPCReceived=='createdDate_dt' && reverseCPCReceived),'fa-caret-down':(sortCPCReceived=='createdDate_dt' && !reverseCPCReceived)}"></i>
                                                </div>
                                            </div>
                                            <div class="row table-hover table-msr" ng-repeat="communique in cpcReceived|orderBy:sortCPCReceived:reverseCPCReceived">
                                                <div class="row border" style="padding-top: 10px;padding-bottom: 10px;">
                                                    <div ng-click="displayDetails=!displayDetails;showDetails(communique)" class="row table-row">
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span>{{communique.government_s|term}}
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span ng-repeat="checkpoint in communique.checkpoint_CEN_ss">
                                                                {{parseJSON(checkpoint)|lstring}}
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            {{communique.title_t}}
                                                            <i class="fa fa-refresh fa-spin" ng-show="displayDetails && !communique.data" />
                                                        </div>
                                                        <div class="col-lg-1 col-md-1 col-xs-1">
                                                            <span ng-repeat="user in communique.geneticRessourceUsers">{{user.organization|lstring}}
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span ng-repeat="keyword in communique.keywords_CEN_ss">{{parseJSON(keyword)|lstring}}{{$last ? '':', '}}</span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-xs-2">
                                                            <span ng-show="!communique.permit_ss">Not available</span>
                                                            <span ng-repeat="permit in communique.permit_ss">
                                                                <a ng-href="/database/{{permit|uniqueIDWithoutRevision}}" target="_new">{{permit|uniqueIDWithoutRevision}}</a>
                                                                <br/>
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-1 col-md-1 col-xs-1">{{communique.createdDate_dt|formatDate}}</div>
                                                    </div>
                                                    <div class="row">
                                                        <i ng-show="displayDetails" class="glyphicon glyphicon-remove-circle circle pull-right" style="position:relative;top:{{40 + (communique.permit_ss ? communique.permit_ss.length*10 :0  )}}px;z-index:100;font-size:20px;color:white;" ng-click="displayDetails=!displayDetails;"></i>
                                                        <div class="col-xs-12 details document-show-hide" ng-show="displayDetails" record-loader document="communique.data" hide="title;header;libraries"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row" ng-show="cpcReceived.length==0">
                                                <div class="col-lg-10 col-md-12 col-xs-12 tableheader color-orange">No Checkpoint Communiqués (CPC) received</div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- end row -->



                    </div>
                    <!-- end container -->


                </div>
            </div>
        </div>

        <!-- end controller -->
    </div>
</div>
</div>
