<div ng-hide="hideEverything">
  <!-- <h4>Request information and status</h4> -->

  <!-- <div> -->
  <!-- <table class="table table-striped">

			  <tr>
			  	<td style="width:40%">Request ID</td>
			  	<td style="text-transform:uppercase;white-space:nowrap;">
			  		{{formatWID(workflow._id)}}
				</td>
			  </tr>
			  <tr>
			  	<td>Request Type</td>
			  	<td>
			  		<div ng-switch="workflow.type.name">
						<span ng-switch-when="publishNationalRecord">Publishing request</span>
						<span ng-switch-when="publishReferenceRecord">Publishing request</span>
						<span ng-switch-default>*{{workflow.type.name|uppercase}}</span>
					</div>
				</td>
			  </tr>
			  <tr>
			  	<td>Record ID</td>
			  	<td>
			  		<a    ng-show="workflow.result.documentID||workflow.data.documentID" ng-href="/database/record?documentID={{workflow.result.documentID||workflow.data.documentID}}">{{workflow.result.documentID||workflow.data.documentID}}</a>
			  		<span ng-hide="workflow.result.documentID||workflow.data.documentID">[new]</span>
			  		<span ng-show="workflow.result.revision">(rev. {{workflow.result.revision}})</span>
				</td>
			  </tr>
			  <tr>
			  	<td>Description</td>
			  	<td>
					<strong>{{workflow.data.metadata.schema|schemaName}}</strong>
					-
					<span>{{workflow.data.title | lstring}}</span>

				</td>
			  </tr>
			  <tr>
			  	<td>Status</td>
			  	<td>
			  		<span ng-switch="workflow.state">
			  			<span ng-switch-when="running"><i class="glyphicon glyphicon-cog"></i> Pending</span>
			  			<span ng-switch-when="completed">Completed on {{workflow.closedOn|date:'short'}}</span>
			  			<span ng-switch-when="canceled"><i class="glyphicon glyphicon-remove-circle"></i> Canceled on {{workflow.closedOn|date:'short'}}</span>
			  			<span ng-switch-when=""><i class="glyphicon glyphicon-exclamation-sign"></i> Failed on {{workflow.closedOn|date:'short'}}</span>
			  			<span ng-switch-default>*{{workflow.state|uppercase}}</span>
					</span>
				</td>
			  </tr>

			  <tr ng-show="workflow.createdOn">
			  	<td>Created on</td>
			  	<td>{{workflow.createdOn|date:'short'}} by {{workflow.createdBy_info.firstName}} {{workflow.createdBy_info.lastName}} ({{workflow.createdBy_info.email}})</td>
			  </tr>
		</table> -->

  <!-- Pending activity(ies) -->


  <!-- <div >
			<a type="button" class="btn btn-primary"
			ng-href="/register/{{workflow.data.metadata.schema | schemaShortName}}/{{activity.input.identifier}}/edit?workflow={{workflowTaskId}}"><i class="glyphicon glyphicon-edit"></i> </a>
			<button type="button" class="btn btn-primary" ng-click="updateActivity({ action : 'approve' })"><i class="glyphicon glyphicon-ok"></i> </button>
			<button type="button" class="btn btn-warning"  data-toggle="modal" data-target="#rejectModal"><i class="glyphicon glyphicon-remove"></i> </button>
		</div> -->
<style>
.overlayDiv{
		opacity:0.2;
		z-index:100;
		background:gray;
	}
</style>
  <div ng-repeat="activity in workflow.activities|filter:isOpen|orderBy:'createdOn'" >
    <!-- <div class="text" style="padding-bottom:15px;">Please choose one of the following options:</div> -->

    <div class="row row-centered" id="buttonsDiv"  style="margin-bottom:15px;border-top:1px dashed #333;border-bottom:1px dashed #333;padding-bottom:15px;padding-top:15px;" ng-show="isAssignedToMe(activity)">

      <div class="col-xs-4">
        <button type="button" class="btn btn-lg btn-success" style="width:140px;" ng-click="updateActivity({ action : 'approve' })" ng-disabled="isUpdating">
          <i class="glyphicon glyphicon-ok"></i>
          <br>APPROVE
        </button>

      </div>
	  <div class="col-xs-4" ng-show="!isUpdating">
		<a type="button" class="btn btn-lg btn-info" style="width:140px;" ng-href="/register/{{workflow.data.metadata.schema | schemaShortName}}/{{activity.input.identifier}}/edit?workflow={{workflowTaskId}}">
			<i class="glyphicon glyphicon-edit"></i>
			<br>EDIT</a>

	  </div>
      <div class="col-xs-4" ng-show="isUpdating">
        <a type="button" class="btn btn-lg btn-info" style="width:140px;" >
          <i class="fa fa-cog fa-spin fa-lg" id="spinner"  style="display:none"/>
          <br>EDIT</a>
      </div>

      <div class="col-xs-4">
        <button type="button" class="btn btn-lg btn-warning" style="width:140px;" data-toggle="modal" data-target="#rejectModal" ng-disabled="isUpdating">
          <i class="glyphicon glyphicon-remove"></i>
          <br>REJECT
        </button>
      </div>


    </div>

    <form name="rejectForm" role="form">
      <div class="modal fade" id="rejectModal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Request Changes or Reject a record revision</h4>
            </div>
            <div class="modal-body">
              <p ng-class="{ 'has-warning':rejectForm.reason.$error.required, 'has-success':!rejectForm.reason.$invalid }">
                <textarea class="form-control" rows="5" name="reason" ng-model="rejectReason" required></textarea>
                <span class="help-block" ng-show="rejectForm.reason.$error.required">Please provide instructions on how you want the record to be modified or the reason why you rejected this record.</span>
              </p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-warning" data-dismiss="modal" ng-disabled="rejectForm.reason.$error.required" ng-click="updateActivity({ action : 'reject', reason: rejectReason })"><i class="glyphicon glyphicon-remove"></i> Request Changes / Reject</button>
            </div>
          </div>
        </div>
      </div>
    </form>

    <div ng-show="document" class="t-document">
      <record-loader document="document" class="shadow-z-2" hide-buttons="true" link-target="_self"></record-loader>
    </div>

  </div>

  <!--
			<table class="table table-striped" ng-show="(workflow.activities|filter:isOpen).length">
			  <tr>
			  	<th style="width:40%">Pending activity(ies)</th>
			  	<th>Status</th>
			  	<th>&nbsp;</th>
			  </tr>

			  <tr class="bg-red" ng-repeat="activity in workflow.activities|filter:isOpen|orderBy:'createdOn'">
			  	<td>
					<div ng-show="activity" ng-switch="activity.name">
						<span ng-switch-when="publishRecord">Approve or Reject record publication</span>
						<span ng-switch-default>*{{activity.name|uppercase}}</span>
					</div>
			  	</td>
			  	<td>

					<span ng-switch="activity.name">
						<span ng-switch-when="publishRecord">Waiting for validation</span>
						<span ng-switch-default>{{activity.name}}*</span>
					</span>



					<span ng-show="activity.assignedToRule">
						by
						<em ng-switch="activity.assignedToRule|limitTo:7">
							<span ng-switch-when="ABS-NFP">ABS-CH Focal Point or Publishing Authority</span>
							<span ng-switch-when="BCH-NFP">BCH Focal Point</span>
							<span ng-switch-when="CHM-NFP">CHM Focal Point</span>
							<span ng-switch-when="BCH-Adm">SCBD</span>
							<span ng-switch-when="ABS-Adm">SCBD</span>
							<span ng-switch-when="CHM-Adm">SCBD</span>
							<span ng-switch-default>*{{activity.assignedToRule}}*</span>
						</em>
					</span>

					<span ng-hide="activity.assignedToRule">

						<span ng-show="activity.assignedTo">
							by <span ng-repeat="user in activity.assignedTo_info">{{user.firstName}} {{user.lastName}}<span ng-hide="$last">, </span>
						</span>

						<span ng-hide="activity.assignedTo">
							<em>Not assigned yet</em>
						</span>
					</span>
			  	</td>
			  	<td class="text-right">
			  			<div ng-show="isAssignedToMe(activity)">
							<div ng-hide="activity.closedOn" ng-switch="activity.name">
								<div ng-switch-when="publishRecord">
									<span ng-hide="activity.closedOn">
										<div ng-show="isAssignedToMe(activity)">
											<a type="button" class="btn btn-primary"
											ng-href="/register/{{workflow.data.metadata.schema | schemaShortName}}/{{activity.input.identifier}}/edit?workflow={{workflowTaskId}}"><i class="glyphicon glyphicon-edit"></i> </a>
											<button type="button" class="btn btn-primary" ng-click="updateActivity({ action : 'approve' })"><i class="glyphicon glyphicon-ok"></i> </button>
											<button type="button" class="btn btn-warning"  data-toggle="modal" data-target="#rejectModal"><i class="glyphicon glyphicon-remove"></i> </button>
										</div>
									</span>
									<form name="rejectForm" role="form">
										<div class="modal fade" id="rejectModal">
										  <div class="modal-dialog">
										    <div class="modal-content">
										      <div class="modal-header">
										        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
										        <h4 class="modal-title">Request Changes or Reject a record revision</h4>
										      </div>
										      <div class="modal-body">
											    <p ng-class="{ 'has-warning':rejectForm.reason.$error.required, 'has-success':!rejectForm.reason.$invalid }">
												    <textarea class="form-control" rows="5" name="reason" ng-model="rejectReason" required></textarea>
												    <span class="help-block" ng-show="rejectForm.reason.$error.required">Please provide instructions on how you want the record to be modified or the reason why you rejected this record.</span>
										        </p>
										      </div>
										      <div class="modal-footer">
										        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
												<button type="button" class="btn btn-warning" data-dismiss="modal" ng-disabled="rejectForm.reason.$error.required" ng-click="updateActivity({ action : 'reject', reason: rejectReason })"><i class="glyphicon glyphicon-remove"></i> Request Changes / Reject </button>
										      </div>
										    </div>
										  </div>
										</div>
								    </form>
								</div>
							</div>

							<div ng-show="activity.completedOn">

								<span ng-show="activity" ng-switch="activity.result.action">
									<span ng-switch-when="approve"><i class="glyphicon glyphicon-ok"></i> Approved</span>
									<span ng-switch-when="reject"><i class="glyphicon glyphicon-remove"></i> Rejected</span>
								</span>

								<span ng-hide="activity"><i class="glyphicon glyphicon-ok"></i> Completed</span>

								on {{activity.completedOn|date:'short'}} by {{activity.completedBy_info.firstName}} {{activity.completedBy_info.lastName}}
							</div>

							<div ng-show="activity.canceledOn">
								Canceled on {{activity.canceledOn|date:'short'}} by {{activity.canceledBy_info.firstName}} {{activity.canceledBy_info.lastName}}
							</div>

							<div ng-show="activity.failedOn">
								Failed on {{activity.failedOn|date:'short'}}
							</div>
						</div>
			  	</td>
			  </tr>
			</table> -->

  <!-- Completed activity(ies) -->

  <!-- <table class="table table-striped" ng-show="(workflow.activities|filter:isClose).length">
			  <tr>
			  	<th style="width:40%">Completed activity(ies)</th>
			  	<th>Status</th>
			  </tr>

			  <tr ng-repeat="activity in workflow.activities|filter:isClose|orderBy:'createdOn'">
			  	<td>
					<div ng-show="activity" ng-switch="activity.name">
						<span ng-switch-when="publishRecord">Approve or Reject record publication</span>
						<span ng-switch-default>{{activity.name|uppercase}}*</span>
					</div>
			  	</td>
			  	<td>
					<div ng-show="activity.completedOn">

						<span ng-switch="activity.name+'-'+activity.result.action">
							<span ng-switch-when="publishRecord-approve"><i class="glyphicon glyphicon-ok"></i> Approved</span>
							<span ng-switch-when="publishRecord-reject"><i class="glyphicon glyphicon-remove"></i> Rejected</span>
							<span ng-switch-default>{{activity.name+'-'+activity.result.action}}*</span>
						</span>

						on {{activity.completedOn|date:'short'}} by {{activity.completedBy_info.firstName}} {{activity.completedBy_info.lastName}}
					</div>

					<div ng-show="activity.canceledOn">
						Canceled on {{activity.canceledOn|date:'short'}} by {{activity.canceledBy_info.firstName}} {{activity.canceledBy_info.lastName}}
					</div>

					<div ng-show="activity.failedOn">
						Failed on {{activity.failedOn|date:'short'}}
					</div>

			  	</td>
			  </tr>

			  </table> -->


  <!-- </div> -->
  <style>
    .text {
      font-size: 12px;
      font-weight: bold;
      color: #333;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
  </style>
</div>
