<link href="/app/css/country.css" rel="stylesheet">
<!-- <script src="/app/libs/angucomplete/angucomplete.js"></script> -->
<link href="/app/libs/angucomplete/angucomplete.css" rel="stylesheet">
<link href="/app/libs/jqvmap/jqvmap/jqvmap.css" rel="stylesheet">

<style type="text/css">

    .jqvmap-label{
        background:none;
        color:none;
    }
    .jqvmap-zoomin, .jqvmap-zoomout{
        /*padding:0px;*/
        width:25px;
        height:25px
    }
    .view li{
        cursor:pointer
    }

    .active-circle{border:2px solid #ccc;}

    .animate-enter,
    .animate-leave
    {
      -webkit-transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      -moz-transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      -ms-transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      -o-transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      transition: 400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all;
      position: relative;
      display: block;
    }

    .animate-enter.animate-enter-active,
    .animate-leave {
      opacity: 1;
      top: 0;
      height: 30px;
    }

    .animate-leave.animate-leave-active,
    .animate-enter {
      opacity: 0;
      top: -50px;
      height: 0px;
    }
    .active-facet{
        background-color:#428bca!important;
    }
    .facetCircle{
        width:80px;height:80px;padding-top:20px;padding-left:20px;background-color:#1FA65D;
    }
</style>
<script type="text/javascript">
  $("#signature").tooltip();
</script>

<div ng-controller="CountriesController">

    <div class="category-container" >
        <div class="container">
            <span class="category">
              <div class="row"  >
                  <div class="span12">


                    <table align="center" style="width: 90%;text-align:center;" cellspacing="10" cellpadding="10">

                        <tr>
                            <td style="text-align: center; width: 200px;">
                                <div style="width: 180px; height: 100px;cursor:pointer;" ng-click="searchFilter=isPartyToCBD;updateMap('party')">

                                  <div class="numberCircle" style="width:80px;height:80px;padding-top:20px;background-color:#1FA65D;" ng-class="{'active-circle': selected_circle=='party'}">
                                  {{parties}}</div>
                                  <div style="padding-top:5px;color: #fff; font-size: 10px; text-transform: uppercase;font-weight:bold;">
                                  PARTIES TO THE CBD</div>

                                    <!-- <div style="color: #666; font-size: 10px; text-transform: uppercase;">Parties to the CBD</div>
                                    <div style="color: #444; font-size: 28px; padding-top: 10px;font-weight:bold;"> 197
                                    </div> -->
                                </div>
                            </td>
                             <td style="text-align:center;width:200px;">
                                <div  style="width: 180px; height: 100px;cursor:pointer;" ng-click="searchFilter=isSignatory;updateMap('signatory')">

                                <div class="numberCircle" style="width:80px;height:80px;padding-top:20px;background-color:#5bc0de;"  ng-class="{'active-circle': selected_circle=='signatory'}">
                                {{signatures}}</div>
                                <div style="padding-top:5px;color: #fff; font-size: 10px; text-transform: uppercase;font-weight:bold;">
                                Signatures</div>


                                </div>
                                 </td>
                            <td style="text-align: center; width: 200px;">
                              <div style="width: 180px; height: 100px;cursor:pointer;" ng-click="searchFilter=isRatified;updateMap('ratified')">

                                  <div class="numberCircle" style="width:80px;height:80px;padding-top:20px;background-color:#428bca;"  ng-class="{'active-circle': selected_circle=='ratified'}">
                                  {{ratifications}}</div>
                                  <div style="padding-top:5px;color: #fff; font-size: 10px; text-transform: uppercase;font-weight:bold;">
                                  ratifications</div>
                                </div>
                            </td>
                            <td style="text-align:center;width:200px;">
                                <div style=" width: 180px; height: 100px;">

                                  <div class="numberCircle" style="width:80px;height:80px;padding-top:20px;background-color:#fff;color:#000;font-weight:bold;">
                                  {{daysUntilEntry}}<br><span style="position:relative;top:-20px;color: #999; font-size: 11px; text-transform: uppercase;font-weight:bold;">days</span></div>
                                  <div style="position:relative;top:-15px;padding-top:5px;color: #fff; font-size: 10px; text-transform: uppercase;font-weight:bold;">
                                   until entry into force
                                    </div>



                                </div>


                               </td>


                        </tr>
                    </table>



                  </div>
               </div>
        </div>
   </div>

   <div class="container">
    <div class="row">
        <div class="col-lg-12">
            <div class="row" >
                <div class="col-lg-1" style="padding:5px !important;width:10.66% !important">
                <a ng-href="#">
                    <div class="panel panel-default"
                    ng-class="{'panel-primary': isSelected('party')}"  ng-click="searchFilter=isPartyToCBD;updateMap('party')">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-10 text-center">
                                    <div class="huge">All</div>
                                </div>
                                <div class="col-xs-10 text-right">
                                    <div class="huge">&nbsp;</div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer">
                            <span class="pull-left">View</span>
                            <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </a>
            </div>
              <div class="col-lg-1" ng-repeat="facet in commonFormatFacets" style="padding:5px !important;width:11.66% !important">
                <a ng-href="#">
                    <div class="panel panel-default"
                    ng-class="{'panel-primary': isSelected(facet[0])}"  ng-click="selected_facet=facet[0];updateMap(facet[0]);">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-10 text-right">
                                    <div class="huge">{{facet[0]|schemaShortName}} <b>{{facet[1].facetCount}}</b></div>
                                </div>
                                <div class="col-xs-12 text-right">
                                    <div class="huge">Countries <b>{{facet[1].countryCount}}</b></div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer">
                            <span class="pull-left">View</span>
                            <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </a>
              </div>
          </div>
        </div>
    </div>
    <div class="row  pull-right">
        <div class="col-lg-12">
            <div class="btn-group">
              <button class="btn btn-info" data-toggle="dropdown">
                  <i ng-hide="showMap" class="fa fa-list fa-lg">&nbsp;&nbsp;List</i>
                  <i ng-show="showMap" class="fa fa-globe fa-lg">&nbsp;&nbsp;Map</i>
              </button>
              <button class="btn dropdown-toggle btn-info" data-toggle="dropdown">
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu view">
                <li><a ng-click="showMap=false;slideMap('#listDiv','#mapDiv')"><i class="fa fa-list fa-lg"></i>&nbsp;&nbsp;List</a></li>
                <li><a ng-click="showMap=true;slideMap('#mapDiv','#listDiv')"><i class="fa fa-globe fa-lg"></i>&nbsp;&nbsp;Map</a></li>
              </ul>
            </div>

        </div>
    </div>
<br/><br/><br/>
    <div class="row"  id="mapDiv" >
          <div id="vmap" style="width: 100%; height: 600px;"></div>
    </div>

    <div class="row"  style="display:none"id="listDiv">
      <div class="span12"  style="padding-top:20px;">
{{searchFilter}} {{countryFilter}}
        <table class="table table-countries table-striped">
          <tr>
              <td colspan="5" >
                  <!-- <div class="pull-left">
                    <span class="label label-default">Not Ratified</span>
                    <span class="label label-primary">Ratified</span>
                    <span class="label label-info">Signatory</span>
                  </div> -->
                  <div class="pull-right" style="width:30%" >
                    <div angucomplete id="ex1" placeholder="Search countries" pause="100"  localdata="countriesforAutocomplete" minlength="1" inputclass="form-control form-control-small"   searchfields="name" selectedObject="selectedCountry" searchStr="countryFilter" titlefield="name"/>
                  </div>
              </td>
          </tr>
          <tr>
            <th>#</th>
            <th style="white-space:nowrap;"><span style="cursor:pointer;" ng-click="sortTable('name.en')">Country
             <i ng-show="sortTerm=='name.en'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></span></th>
             <th style="white-space:nowrap;"><span style="cursor:pointer;" ng-click="sortTable('treaties.XXVII8b.signature')">Signature
             <i ng-show="sortTerm=='treaties.XXVII8b.signature'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></span></th>
             <th style="white-space:nowrap;"><span style="cursor:pointer;" ng-click="sortTable('treaties.XXVII8b.instrument')">Instrument
             <i ng-show="sortTerm=='treaties.XXVII8b.instrument'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></span></th>
            <th style="white-space:nowrap;"><span style="cursor:pointer;" ng-click="sortTable('treaties.XXVII8b.deposit')">Deposit
             <i ng-show="sortTerm=='treaties.XXVII8b.deposit'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></span></th>
            <!-- <th>Entry into force</th> -->
          </tr><!-- -->
          <tr ng-repeat="country in (countries | filter:countryFilter | filter: searchFilter | orderBy:sortTerm:orderList)"  ng-animate="{enter: 'animate-enter', leave: 'animate-leave'}" >
            <td>{{$index + 1}}</td>
            <td><a ng-href="countries/{{country.code}}"  class="country-list-name label" ng-class="{'label-info':country.isSignatory && !country.isRatified, 'label-primary':country.isRatified, 'label-default':!country.isRatified && !country.isSignatory}">{{country.name.en}}</a></td>
            <td>{{country.treaties.XXVII8b.signature}}</td>
            <td>{{country.treaties.XXVII8b.instrument}}</td>
            <td>{{country.treaties.XXVII8b.deposit}}</td>
            <!-- <td>{{country.treaties.XXVII8b.party}}</td> -->
          </tr>
        </table>


   </div>

</div>
