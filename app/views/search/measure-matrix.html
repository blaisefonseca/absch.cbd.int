<div ng-controller="matrixController">
	<div class="container" style="margin-top:20px;">
        <style>
            .matrixTable tr .headerColumn{
                width:30%;
                font-weight: bold;
            }
            .matrixheaderColumn{
                width:40%;
            }
            .tableCell{
                padding:0px!important;
            }
            .tableCell table{
                border:none;
                margin:0px;
            }
            .noBorder{
                border:none!important;
            }
            .noLeftBorder{
                border-left:none!important;
            }
            .noRightBorder{
                border-right:none!important;
            }
            .noTopBorder{
                border-top:none!important;
            }
            .noBottomBorder{
                border-bottom:none!important;
            }
            .whiteBackground{
                background-color:#fff!important;
            }
            .rightBorder{
                border-right:1px solid #ddd;
            }
            .subList{
                padding-left: 5%!important;
            }
        </style>
        <div class="row">
            <div class="col-sm-12 well">
                <h1> Measure Matrix</h1>                
            </div>
			
			<div class="col-sm-12 well" ng-repeat="measure in measures">
                   <div ng-click="loadMatrix(measure)"style="cursor:pointer">
                       <strong>{{measure.government_EN_t}}</strong> | <strong>{{measure.title_t}}</strong>
                       | {{measure.status_EN_t}} | {{measure.type_EN_t}} | {{measure.jurisdiction_EN_t}}
                       | 
                       <span ng-show="measure.adoption_dt">Adopted on </span>
                       <span ng-show="measure.entryIntoForce_dt">Entry into force on </span>
                       <span ng-show="measure.retired_dt">Retired on </span>
                       {{(measure.adoption_dt ||measure.entryIntoForce_dt || measure.retired_dt)|formatDate}}
                       <span ng-show="measure.limitedApplication_dt"> - {{measure.limitedApplication_dt|formatDate}}</span>
                           
                       <i class="fa fa-chevron-circle-down"  ></i>
                   </div>
                    <div ng-show="measure.isLoading">
                        <i class="fa fa-spinner fa-spin"></i> Loading...
                    </div>
                    <div class="row" ng-show="measure.document && measure.showDocument">
                       <br/>
                        <div class="col-sm-1"></div>
                        <div class="col-sm-11">
                            <table class="table noBorder">
                	           <tr>
                                   <td> <b>Amended by:</b></td>
                                   <td><div ng-repeat="amended in measure.document.amendedMeasures">{{amended.measure.title|lstring}}</div></td>
                               </tr>
                               <tr>
                                   <td><b>Amendment Description:</b></td>
                                   <td><span ng-bind-html="measure.document.amendmentsDescription|lstring"></span></td>
                               </tr>
                               <tr>
                                   <td><b>Related to:</b></td>
                                   <td><div ng-repeat="linkedMeasure in measure.document.linkedMeasures">{{linkedMeasure.measure.title|lstring}}</div></td>
                               </tr>
                               <tr>
                                   <td><b>Relation Description:</b></td>
                                   <td><span ng-bind-html="measure.document.linkedMeasuresDescription|lstring"></span></td>
                               </tr>
                            </table>
                       </div>
                       
                        <div class="col-sm-12">
                            <table class="table table-bordered matrixTable">
                                <tr>
                                    <th class="headerColumn whiteBackground noRightBorder"></th>
                                    <th class="tableCell  whiteBackground noLeftBorder">
                                        <table class="table">
                            	           <tr>
                                               <th class="matrixheaderColumn noTopBorder noBottomBorder" style="border-right:1px solid #ddd;">Element of the measure</th>
                                               <th class="noTopBorder">Covered by the following articles and sections:</th>
                                           </tr>
                                        </table>
                                    </th>
                                </tr>
                                <tr>
                                    <th class="headerColumn">Competent national authority/ies</th>
                                    <th class="tableCell">
                                        <table class="table">
                            	           <tr>
                                               <th class="matrixheaderColumn noTopBorder noBottomBorder" style="border-right:1px solid #ddd;">&nbsp;</th>
                                               <th class="noTopBorder noBottomBorder">&nbsp;</th>
                                           </tr>
                                        </table>
                                    </th>
                                </tr>
                                
                                <tr ng-repeat="scope in measure.document.scopeOfElements">
                                    <td class="headerColumn"><b>{{scope.name}}<b></td>
                                    <td class="tableCell">
                                        <table class="table">
                                            <tr>
                                                <td class="matrixheaderColumn rightBorder">
                                                    {{scope.name}}
                                                </td>
                                                <td><b>{{scope.reference | lstring:locale}}</b></td>
                                            </tr>
                            	           <tr ng-repeat="term in scope.elements">
                                               <td class="matrixheaderColumn rightBorder subList" >{{term|term:locale}} </td>
                                               <td class="subList">{{term.section | lstring:locale}}</td>
                                           </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>            
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>