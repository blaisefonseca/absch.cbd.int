<div ng-controller="matrixController">
	<div class="container" style="margin-top:20px;">
        <style>
            .matrixTable tr .headerColumn{
                width:30%;
                font-weight: bold;
            }
            .matrixheaderColumn{
                width:40%;
            }
            .tableCell{
                padding:0px!important;
            }
            .tableCell table{
                border:none;
                margin:0px;
            }
            .noBorder{
                border:none!important;
            }
            .noLeftBorder{
                border-left:none!important;
            }
            .noRightBorder{
                border-right:none!important;
            }
            .noTopBorder{
                border-top:none!important;
            }
            .noBottomBorder{
                border-bottom:none!important;
            }
            .whiteBackground{
                background-color:#fff!important;
            }
            .rightBorder{
                border-right:1px solid #ddd;
            }
            .subList{
                padding-left: 5%!important;
            }
			.cover50{
				width: 50%;
			}
			.cover45{
				width: 45%;
			}
			.cover45_1{
				width: 45.1%;
			}
			.cover55{
				width: 55%;
			}
			.paddingleft6{
				padding-left: 6%!important;
			}
			.paddingleft9{
				padding-left: 9%!important;
			}
        </style>
        <div class="row">
            <div class="col-sm-12 well">
                <h1> Measure Matrix</h1>
            </div>

			<div class="col-sm-12 well" ng-repeat="measure in measures">
                   <div ng-click="loadMatrix(measure)"style="cursor:pointer">
                       <strong>{{measure.government_EN_t}}</strong> | <strong>{{measure.title_t}}</strong>
                       | {{measure.status_EN_t}} | {{measure.type_EN_t}} | {{measure.jurisdiction_EN_t}}
                       |
                       <span ng-show="measure.adoption_dt">Adopted on </span>
                       <span ng-show="measure.entryIntoForce_dt">Entry into force on </span>
                       <span ng-show="measure.retired_dt">Retired on </span>
                       {{(measure.adoption_dt ||measure.entryIntoForce_dt || measure.retired_dt)|formatDate}}
                       <span ng-show="measure.limitedApplication_dt"> - {{measure.limitedApplication_dt|formatDate}}</span>

                       <i class="fa fa-chevron-circle-down"  ></i>
                   </div>
                    <div ng-show="measure.isLoading">
                        <i class="fa fa-spinner fa-spin"></i> Loading...
                    </div>
                    <div class="row" ng-show="measure.document && measure.showDocument">
                       <br/>
                        <div class="col-sm-1"></div>
                        <div class="col-sm-11">
                            <table class="table noBorder">
                	           <tr>
                                   <td> <b>Amended by:</b></td>
                                   <td><div ng-repeat="amended in measure.document.amendedMeasures">{{amended.measure.title|lstring}}</div></td>
                               </tr>
                               <tr>
                                   <td><b>Amendment Description:</b></td>
                                   <td><span ng-bind-html="measure.document.amendmentsDescription|lstring"></span></td>
                               </tr>
                               <tr>
                                   <td><b>Related to:</b></td>
                                   <td><div ng-repeat="linkedMeasure in measure.document.linkedMeasures">{{linkedMeasure.measure.title|lstring}}</div></td>
                               </tr>
                               <tr>
                                   <td><b>Relation Description:</b></td>
                                   <td><span ng-bind-html="measure.document.linkedMeasuresDescription|lstring"></span></td>
                               </tr>
                            </table>
                       </div>
						<div class="row">
							<div class="col-sm-12">
								<script type="text/ng-template"  id="/app/views/search/matrix/measure-matrix.directive/abs">
									<table class="table table-bordered matrixTable">
										<tr ng:repeat="term in rootTerms" >
											<td class="tableCell" ng-include="'/app/views/search/matrix/measure-matrix.directive/abs/inner'"></td>
										</tr>
									</table>
								</script>
								<script type="text/ng-template"  id="/app/views/search/matrix/measure-matrix.directive/abs/inner">
									<table class="table">
										<tr>
											<td  class="matrixheaderColumn rightBorder ">
												<strong ng-show="!term.broaderTerms">{{term.title||term.name | lstring:locale}}</strong>
												<span ng-show="term.broaderTerms"  class="paddingleft3" ng:class="{'paddingleft6':isMeasure}">{{term.title||term.name | lstring:locale}}</span>
											</td>
											<td style="width:48.99%">
												<strong ng-show="!term.broaderTerms" >{{sections[term.identifier] | lstring:locale}}</strong>
												<span ng-show="term.broaderTerms" class="paddingleft3" ng:class="{'paddingleft6':!isMeasure,'paddingleft9':isMeasure}">{{sections[term.identifier] | lstring:locale}}</span>
											</td>
										</tr>
										<tr ng:if="term.narrowerTerms && term.narrowerTerms.length > 0">
											<td class="matrixheaderColumn rightBorder subList1 cover50 noBottomBorder noTopBorder" colspan="2" style="padding-top:0px">
												<table class="table matrixTable" ng:class="{'table-bordered':!isMeasure}" >
													<tr ng:repeat="term in term.narrowerTerms" ng:if="sections[term.identifier]">
														<td class="tableCell" ng-include="'/app/views/search/matrix/measure-matrix.directive/abs/inner'"></td>
													</tr>
												</table>
											</td>
										</tr>
									</table>

								</script>
							</div>
							<div class="row">
								<div class="col-sm-12">
									<div measure-matrix-abs name="absMeasures" ng-model="measure.document.absMeasures" locales="measure.document.header.languages" terms="measureElements()" document="measure.document"></div>

									<!-- <table class="table table-bordered matrixTable" style="width:100%" cellspacing="0" cellpadding="0">

										<tr>
											<td class="tableCell" >
												{{term.title||term.name | lstring:locale}}
											</td>
											<td>
												{{term.section}}
											</td>
										</tr>
										<tr>
											<td colspan="2">
												<table class="table" >
													<tr ng:repeat="term in term.narrowerTerms" >
														<td class="tableCell" ng-include="'/app/views/search/matrix/measure-matrix.directive/abs/inner'"></td>
													</tr>
												</table>
											</td>
										</tr>
									</table> -->
								</div>
							</div>
						</div>
                        <div class="col-sm-12" ng-hide="true">
                            <table class="table table-bordered matrixTable">
                                <tr>
                                    <!-- <th class="headerColumn whiteBackground noRightBorder"></th> -->
                                    <th class="tableCell  whiteBackground noLeftBorder">
                                        <table class="table">
                            	           <tr>
                                               <th class="matrixheaderColumn noTopBorder noBottomBorder" style="border-right:1px solid #ddd;">Element of the measure</th>
                                               <th class="noTopBorder"style="width:48.99%">Covered by the following articles and sections:</th>
                                           </tr>
                                        </table>
                                    </th>
                                </tr>
                                <tr>
                                    <!-- <th class="headerColumn">Competent national authority/ies</th> -->
                                    <th class="tableCell">
                                        <table class="table">
                            	           <tr>
                                               <th class="matrixheaderColumn noTopBorder noBottomBorder" style="border-right:1px solid #ddd;">&nbsp;</th>
                                               <th class="noTopBorder noBottomBorder"style="width:48.99%">&nbsp;</th>
                                           </tr>
                                        </table>
                                    </th>
                                </tr>
								<!-- <tr ng-repeat="element in absMeasures">
									<td class="tableCell">
									</td>
								</tr> -->
                                <tr ng-repeat="scope in measure.document.scopeOfElements">

                                    <!-- <td class="headerColumn"><b>{{scope.name}}<b></td> -->
                                    <td class="tableCell">
                                        <table class="table">
                                            <tr>
                                                <td  class="matrixheaderColumn rightBorder ">
                                                    <strong>{{scope.name}}</strong>
                                                </td>
                                                <td style="width:48.99%"><b>{{scope.reference | lstring:locale}}</b></td>
                                            </tr>
                            	           <tr ng-repeat="term in scope.elements">
												<td class="matrixheaderColumn rightBorder subList1 cover50 noBottomBorder noTopBorder" colspan="2" style="padding:0px;">
													<table class="table table-bordered">
														<tr class="noBorder">
															<td class="noBorder rightBorder cover45_1" style="padding-left:3%">
																{{term|term:locale}}
															</td>
															<td class="noBordercover55 noBottomBorder noRightBorder noTopBorder" style="padding-left:3%">
																{{term.section | lstring:locale}}
															</td>
														</tr>
														<tr ng-show="term.relatedElements" ng-repeat="related in term.relatedElements">
															<td class="matrixheaderColumn noBottomBorder rightBorder noBorder cover45" style="padding-left:6%">
																{{related.title| lstring:locale}}
														   </td>
			                                               <td class="noTopBorder noBottomBorder noRightBorder cover55"  style="padding-left:6%">
																{{related.section| lstring:locale}}
														   </td>
														</tr>
													</table>
												</td>
                                           </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>
