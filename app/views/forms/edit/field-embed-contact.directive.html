
<div>
    <link href="/app/css/record.css" rel="stylesheet">

    <div class="row" ng-show="getContacts()">
        <div ng-show="showFilter">
            <div class="col-xs-10" style="padding-bottom:3px;">
                <span ng-click="filterBy=null" class="btn" style="font-weight:strong;">
                    <i ng-hide="filterBy" class="glyphicon glyphicon-ok"></i> All
                    <span class="badge">
                        {{(getContacts() ).length}}</span>
                </span>
                <span ng-click="filterBy=isCNA" class="btn" style="font-weight:strong;">
                    <i ng-show="filterBy==isCNA" class="glyphicon glyphicon-ok"></i> CNA
                    <span class="badge">{{(getContacts() | filter:isCNA).length}}</span>
                </span>
                <input type="text" ng-model="keywords" placeholder=" Keyword " class="form-control keyword" style="width:160px;display:inline;">
            </div>
            <div class="col-xs-2" ng-show="showButtons()" style="padding-bottom:3px;">
                <span style="font-size: 16px; color: white;margin:0;padding:0;float:right;">
                    <a ng-click="editContact(-1)" class="btn btn-primary">
                        <span class="glyphicon glyphicon-plus-sign"></span>Add new</a>
                </span>
            </div>
        </div>
    </div>


    <div ng-if="getContacts().length > 0">
        <div class="col-xs-12 form-control no-shadow thin-border" ng-repeat="contact in getContacts() | filter:filterBy | filter:keywords" style="height:auto;margin-bottom:5px;">
            <div class="pull-right">
                <button type="button" class="btn btn-default" ng-click="deleteContact($index, true)"><i class="fa fa-times"></i>
                </button>
            </div>
            <view-contact-reference ng-model='contact' locale="en"></view-contact-reference>
        </div>
    </div>

    <!-- ng-show="showButtons()" -->
    <button class="btn btn-default" ng-click="showContacts()">
        <i class="fa fa-plus"></i> {{caption || 'ADD ORGANIZATION OR CONTACT Â»'}}
    </button>

<!-- Modal -->
    <div class="modal fade" id="editContact" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" aria-hidden="true" ng-click="closeContact()"><i class="material-icons">close</i></button>
              <h2 class="modal-title" id="myModalLabel">
                  <span>Select exisiting
                      <span ng-if="!organizationOnly">Contact or </span>organization</span>
              </h2>
          </div>
          <div class="modal-body">
              <div ng-show="loading">
                  <h1><i class="fa fa-spinner fa-spin"></i></h1>
              </div>

              <div ng-show="!showFilter" class="row">
                  </br>
                  <div ng-repeat="contact in existingContacts | filter:isSelected">
                      <div class="clearfix" ng-if="$index % 3 == 0"></div>
                      <div class="col-xs-4">
                          <div class="well">
                              <i class="fa fa-spinner fa-spin" ng-if="contact.loading"></i>
                              <div class="pull-right">
                                  <button type="button" class="btn btn-default" ng-click="selectContact(contact)"><i class="glyphicon glyphicon-thumbs-up"></i>
                                  </button>
                              </div>
                              <view-contact-reference ng-model='contact' locale="en"></view-contact-reference>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="modal-footer">
            <a type="button" class="btn btn-default" ng-click="closeContact()">Close</a>
          </div>
        </div>
      </div>
    </div>

</div>
