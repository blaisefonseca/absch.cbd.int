
<div ng-cloak>

     <div block-region activate="loading"></div>

	<div class="alert alert-error text-center" ng-show="error">
		<strong>Error as occured...</strong>
		<div>{{error}}</div>
	</div>
	<div class="jumbotron" style="background-color:white;" role="alert" ng-show="documentSuccess">
		<h2>Thank you for downloading document {{documentUID}}.</h2>
		<p>If the document did not download try clicking
			<a href="{{documentUrl}}" class="alert-link">here...</a></p>
		</br>
		</br>
		</br>
		</br>
		This window will close automatically in {{timeLaspe}} seconds.
	</div>

	<div class="jumbotron" style="background-color:white;" role="alert" ng-show="documentError">
		<h2>Thank you for requesting document {{documentUID}}.</h2>
		<p>The document does not exists, if you think this file should be available, please report to
			<a href="mailto:absch@cbd.int" class="alert-link">absch@cbd.int</a></p>
	</div>

   <div id="RecordDetails" ng-if="showDetails">
   <div class="row" >
            <div class="col-xs-12">
                <div class="well">
                    <h3 style="margin:0 0 20px 0;padding:0;">Record Information</h3>
                    <table>
                            <tr>
                                <td><label> Unique Identifier: </label></td>
                                <td class="bold">
                                    <span ng-if="docInfo.revision == 'draft'">
                                       not yet assigned
                                    </span>
                                    <span ng-if="docInfo.revision != 'draft'">
                                        {{internalDocument | uniqueID}}
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><label> Current Status: </label></td>
                                <td class="bold">
                                    <span class="color-grey" ng-if="internalDocumentInfo.revision == 'draft'">
                                        DRAFT
                                    </span>
                                    <span class="color-green"  ng-if="internalDocumentInfo.revision > 0">
                                        PUBLISHED
                                    </span>
                                    <span class="color-red"  ng-if="internalDocumentInfo.workingDocumentLock">
                                        [ Locked: Pending publishing request ]
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><label> Record Type: </label></td>
                                <td class="bold">{{internalDocumentInfo.metadata.schema | schemaName}}</td>
                            </tr>
                             <tr  ng-if="docInfo.revision > 0">
                                <td><label> Record Versions: </label></td>
                                <td class="bold">{{internalDocumentInfo.revision}}</td>
                            </tr>
                            <tr ng-if="docInfo.metadata.government">
                                <td><label> Record Owner: </label></td>
                                 <td class="bold"> {{getUserCountry(internalDocumentInfo.metadata.government)}}</td>
                            </tr>
                            <tr>
                                <td><label> History:</label></td>
                                <td>
                                  <div view-history document-id="internalDocumentInfo.identifier"></div>
                                </td>
                            </tr>
                    </table>
                </div>
            </div>
        </div>
</div> <!-- records details-->

<!--{{internalDocument}}-->


<div class="alert alert-danger" role="alert" ng-show="documentVersionCount != revisionNo && revisionNo != 'draft'">
			<h3>
                This document has been updated. This is not the latest published version.
                <a ng-href="/database/record/{{internalDocument | uniqueID}}" target="new">Click here to view the latest record.</a>
			</h3>
		</div>


	<!--<div ng-show="!error && internalDocument && showDetails">
		<div style="float:right; position:relative;top:1px;">
			<div class="btn-group" ng-show="documentVersionCount>1">
				<button type="button" class="btn btn-danger">Version {{revisionNo}}</button>
				<button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
					<span class="caret"></span>
				</button>
				<ul class="dropdown-menu" role="menu">
					<li ng-repeat="n in [] | range:documentVersionCount">
						<a ng-href="#" ng-click="loadRevision($index+1)">version {{$index+1}} <span ng-if="$last">(latest version)</span></a>
					</li>
				</ul>
			</div>
		</div>
      </div>-->



		<div id="schemaView" ng-show="internalDocument">

		</div>


</div>
