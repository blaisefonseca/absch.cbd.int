<div ng-controller="DashboardController"
 ng-intro-options="introOptions" ng-intro-method="startIntro" ng-intro-autostart="startTour">

  <div style="margin-top:20px;background-color:white;" class="well">

      <div class="dash-header" >
          <h3>
            <span style="color:#aaa;">
                <a class="color-orange fa-11"  ng-click="startIntro()"> <i class="fa fa-youtube-play"></i></a>
                DASHBOARD</span>
                <span class="title">Check the status of your work in the ABSCH</span>
          </h3>
      </div>

    <div class="alert alert-material-lightgrey" >
        The dashboard is a personal working area to follow-up the status of records prepared for their publication in the ABSCH. The content of the dashboard will differ depending on the role assigned in the ABSCH (Publishing Authority (PA) or National Authorized User (NAU)).<br>
        <br>
        In this area you can check whether there are items that require your approval (in the case of the PA) or what is the status of records sent for validation of the PA (in the case of NAUs).
    </div>


    <div>

      <div ng-show="msg" class="alert alert-success alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="msg=''">&times;</button>
        <strong>{{msg}}</strong>
      </div>

      <!-- <div class="alert alert-info" ng-show="user.isAuthenticated">
        <p>You are signed in as: <strong>{{user.name}}</strong>

        </p>
      </div> -->
      <style>
      dt {font-weight:normal;}
      </style>

      <div class="panel panel-default">
  				<div class="panel-body">
					<h2 style="color:#555;">Welcome to the ABSCH. You are signed in!

                        <div class="pull-right text-align:right;" style="padding-left:15px;border-left:3px solid #999;">
                            <div><button class="btn btn-info " ng-click="actionSignOut()">Sign out</button></div>
                            <div style="padding-top:10px;"><a href="#" ng-click="actionProfile()" style="font-size:14px;font-weight:normal;" >update your profile</a></div>
                            <div style="padding-top:10px;padding-bottom:10px;"><a href="#" ng-click="actionPassword()" style="font-size:14px;font-weight:normal;" > change your password</a></div>
                        </div>
                    </h2>

					<dl class="dl-horizontal" style="padding-top:20px;">
					  	<dt style="text-align:left">Name</dt><dd><strong>{{user.name}}
                              <span ng-show="user.roles.indexOf(getRoleName('AbsPublishingAuthorities')) != -1">(PA)</span>
                              <span ng-show="user.roles.indexOf(getRoleName('abschiac')) != -1">(IAC)</span>
                              <span ng-show="user.roles.indexOf(getRoleName('AbsNationalAuthorizedUser')) != -1">(NAU)</span>
                              <span ng-show="user.roles.indexOf(getRoleName('AbsNationalFocalPoint')) != -1">(FP)</span>
                              <span ng-show="user.roles.indexOf(getRoleName('AbsAdministrator')) != -1">(ABS ADMIN)</span>
                              <span ng-show="user.roles.indexOf(getRoleName('Administrator')) != -1">(ADMIN)</span></strong>
                          </dd>
					  	   <dt style="text-align:left;white-space:nowrap;">Primary email</dt><dd><strong>{{user.email}}</strong></dd>
                          <dt style="text-align:left;white-space:nowrap;">Country</dt><dd style="text-transform:uppercase;">
                              <a href="/countries/{{user.government | uppercase}}"><strong>{{user.government | term}}</strong></a></dd>

					</dl>


				</div>
			</div>

      <div ng-hide="user.isAuthenticated">
        <a ng-show="!user.isAuthenticated" ng-click="signIn('dashboard')" class="btn btn-info">
          <i class="glyphicon glyphicon-off"></i> SIGN IN
        </a>
      </div>
      <div class="row" id="dashboard_panels">

           <div class="col-lg-4" ng-show="compareRoles(user.roles, PAroles)" >
            <div class="panel shadow-z-2" ng-class="{'greyout': !urgentAttentionCount,  'panel-danger': urgentAttentionCount  }">
              <div class="panel-heading">
                <div class="row">
                  <div class="col-xs-4">
                    <i class="fa fa-exclamation-circle fa-5x"></i>
                  </div>
                  <div class="col-xs-8">
                    <h2 style="padding-top:7px;">New requests</h2>
                  </div>
                </div>
              </div>
              <a href="/dashboard/pending">
                <div class="panel-footer announcement-bottom">
                  <div class="row">
                    <div class="col-xs-6" style="white-space:nowrap;">
                      View new requests
                    </div>
                    <div class="col-xs-6 text-right">
                      <span class="label label-danger" ng-show="urgentAttentionCount">{{urgentAttentionCount}}</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          </div>

          <div class="col-lg-4" >
            <div class="panel shadow-z-2" ng-class="{'greyout': !pendingCount,  'panel-warning': pendingCount  }">
              <div class="panel-heading">
                <div class="row">
                  <div class="col-xs-4">
                    <i class="fa fa-clock-o  fa-5x"></i>
                  </div>
                  <div class="col-xs-8">
                    <h2 style="padding-top:7px;">Pending requests</h2>
                  </div>
                </div>
              </div>
              <a href="/dashboard/mytasks">
                <div class="panel-footer announcement-bottom">
                  <div class="row">
                    <div class="col-xs-10">
                      View pending requests
                    </div>
                    <div class="col-xs-2 text-right">
                      <span class="label label-warning" ng-show="pendingCount">{{pendingCount}}</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          </div>

          <div class="col-lg-4">
            <div class="panel shadow-z-2"  ng-class="{'greyout': !completedRequestCount,  'panel-success': completedRequestCount  }">
              <div class="panel-heading">
                <div class="row">
                  <div class="col-xs-4">
                    <i class="fa fa-check-square fa-5x"></i>
                  </div>
                  <div class="col-xs-8">
                    <h2  style="padding-top:7px;">Completed requests</h2>
                  </div>
                </div>
              </div>
              <a href="/dashboard/completed">
                <div class="panel-footer announcement-bottom">
                  <div class="row">
                    <div class="col-xs-10">
                      View completed requests
                    </div>
                    <div class="col-xs-2 text-right">
                      <span class="label label-warning" ng-show="completedRequestCount">{{completedRequestCount}}</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          </div>
      </div>


      <div class="row">
        <div class="col-md-12 col-sm-12 col-sx-12">
          <div class="panel panel-default">
            <div class="panel-heading clearfix">
              <h1 class="panel-title" style="font-size:16px;font-weight:bold;">Activity Feed</1>
            </div>
            <div class="panel-body" style="padding:0;margin:0;">
              <!-- <ul id="myTab" class="nav nav-tabs">
                <li class="active">
                  <a href="#activites" data-toggle="tab" data-original-title="">Activites</a>
                </li>
              </ul>
              <br>-->
              <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade active in" id="activites">
                  <div id="scrollbar">
                    <div class="scrollbar" style="height: 280px;overflow-y:scroll">
                           <ul class="list-group " rel="scrollcontent1">
                            <li ng-repeat="item in userActivities|orderBy:'date':true|limitTo:30" class="list-group-item">
                              <span ng-bind-html="item.title"> </span>
                            </li>
                          </ul>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- row: 2nd isAuthenticated -->
    </div> <!-- registerpage-content -->
  </div> <!-- col-xs-9 -->
</div> <!-- controller -->
