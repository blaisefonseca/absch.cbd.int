<div>
  <h3>
    <a ng-click="showSelect=!showSelect" ng-href="#" data-toggle="modal" data-target="#regionModal">
      <span>{{title | lstring:locale}}</span>
    </a>
  </h3>
  <div class="list-group-item-expand">
    <div ng-animate="'animate'" ng-repeat="item in allTerms | orderBy:'title' | filter:{selected:true}" ng-click="onclick(this, $event)">
        <div class="truncate" style="cursor:pointer">
         <!--  <div class="glyphicon glyphicon-remove"></div> -->
         <input type="checkbox" checked=true > {{item.title.en}} ({{item.count}}) </input>
        </div>
    </div>
  <div>

 <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" id="regionModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel"> {{title | lstring:locale}}</h4>
            </div>
            <div class="modal-body">
              <div class="panel-group" id="accordion" >
                <div class="progress progress-striped active" ng-show="showSelect && terms.length<=0">
                      <div class="progress-bar"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
                        <span class="sr-only">45% Complete</span>
                      </div>
                </div>
                <div class="panel panel-default" ng-repeat="class in terms">
                  <div class="panel-heading">
                    <h4 class="panel-title" style="margin:0">
                      <a class="accordion-toggle" style="color:black" data-toggle="collapse" data-parent="#accordion" ng-href="#{{class.identifier}}">&nbsp;{{class.title.en}}</a>
                    </h4>
                  </div>
                  <div id="{{class.identifier}}" class="panel-collapse" ng-class="{ true:'in', false:'collapse' }[$index==0]">
                    <div class="panel-body">
                      <div class="row">
                        <div class="col-sm-12" ng-repeat="region in class.narrowerTerms">
                          <div class="checkbox" style="margin-top:0;margin-bottom:0">
                            <label><input type="checkbox" ng-model="region.selected" ng-click="refresh(region)">&nbsp;{{region.title.en}} ({{region.count}})</label>
                          </div>
                          <div class="checkbox" style="margin-top:0;margin-bottom:0;margin-left:20px" ng-repeat="region2 in region.narrowerTerms">
                            <label><input type="checkbox" ng-model="region2.selected" ng-click="refresh(region2)">&nbsp;{{region2.title.en}} ({{region2.count}})</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn localBtn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
